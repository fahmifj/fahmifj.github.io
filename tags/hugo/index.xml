<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>hugo on Ef&#39;s log</title>
    <link>https://fahmifj.github.io/tags/hugo/</link>
    <description>Recent content in hugo on Ef&#39;s log</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Sun, 30 Nov 2025 22:37:50 +0700</lastBuildDate><atom:link href="https://fahmifj.github.io/tags/hugo/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo</title>
      <link>https://fahmifj.github.io/blog/revamping-my-blog-part-2/</link>
      <pubDate>Sun, 30 Nov 2025 22:37:50 +0700</pubDate>
      
      <guid>https://fahmifj.github.io/blog/revamping-my-blog-part-2/</guid>
      <description>Part kedua revamp PaperMod</description>
      <content:encoded><![CDATA[<p>Menjelang akhir tahun, gue mulai lanjutin lagi proses revamp blog ini. Dari catatan pribadi, revamp ini udah masuk yang ke-9, tapi disini gue rangkum aja bagian majornya biar lebih gampang. Jadi gue anggap ini revamp kedua.</p>
<p>Di revamp yang <a href="/notes/revamping-my-blog/"target="_blank" rel="noopener noreferrer"
>pertama</a>, gue banyak otak-atik di bagian UI, nah di revamp kedua ini, gue lebih condong ke UXnya, khususnya untuk bagian navigasi.</p>
<h2 id="search-in-navbar">Search in Navbar</h2>
<p>Di PaperMod (tema bawaan), fitur pencariannya ini berupa sebuah halaman khusus. Jadi ketika user mau cari sesuatu di blog gue, dia harus mengklik menu &ldquo;Search&rdquo; yang mengarah ke halaman khusus berisi search box. Di situlah tempat user melakukan pencariannya.</p>
<p>Menurut gue hal cara tersebut kurang praktis dan efisien. Jadi, untuk mempermudah navigasi pencarian, gue pindahkan search box tersebut ke bagian Navbar.</p>
<p><div class="img-container"><img src="./imgs/image-20251118233004676.png" alt="image-20251118233004676"  /></div>
</p>
<h3 id="implementasi">Implementasi</h3>
<p>Caranya gampang, code html terkait search box tinggal di copy-paste ke dalam <code>layout/partials/header.html</code>:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">...[SNIP]...
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;searchBox&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;searchInput&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;searchInput&#34;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&#34;search&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;search&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;Search...&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;searchResults-container &#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  	<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;search-results hidden&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;searchResults&#34;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&#34;search results&#34;</span> <span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">...[SNIP]...</span></span></code></pre>
</figure><p>Fitur search PaperMod ini mengandalkan <a href="fusejs.io"target="_blank" rel="noopener noreferrer"
>Fuse</a> dimana index searchnya hanya di-<em>fetch</em> dan dimuat ketika kita berada di halaman search tadi. Artinya, kalau search box gue pindah ke navbar, search-nya nggak akan jalan kecuali indexnya dimuat di setiap halaman.</p>
<p>Untuk hal ini cukup simple, gue cuma perlu hapus kondisional if berikut yang ada di dalam <code>layout/partials/head.html</code>:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="p">{{</span><span class="o">-</span> <span class="cm">/* Search */</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="cm">/* Load search in every page */</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="o">-</span> <span class="cm">/*if (eq .Layout `search`) */</span> <span class="o">-</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nx">link</span> <span class="nx">crossorigin</span><span class="p">=</span><span class="s">&#34;anonymous&#34;</span> <span class="nx">rel</span><span class="p">=</span><span class="s">&#34;preload&#34;</span> <span class="nx">as</span><span class="p">=</span><span class="s">&#34;fetch&#34;</span> <span class="nx">href</span><span class="p">=</span><span class="s">&#34;{{- .Site.BaseURL -}}index.json&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span><span class="p">[</span><span class="nx">SNIP</span><span class="p">]</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nx">script</span> <span class="k">defer</span> <span class="nx">crossorigin</span><span class="p">=</span><span class="s">&#34;anonymous&#34;</span> <span class="nx">src</span><span class="p">=</span><span class="s">&#34;{{ $search.RelPermalink }}&#34;</span><span class="p">&gt;&lt;</span><span class="o">/</span><span class="nx">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="o">-</span> <span class="nx">end</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="o">-</span> <span class="cm">/* end */</span> <span class="o">-</span><span class="p">}}</span></span></span></code></pre>
</figure><h3 id="touch-up-add-blur-effect">Touch up: Add blur effect</h3>
<p>Terinspirasi dari tema <a href="https://hugoloveit.com/"target="_blank" rel="noopener noreferrer"
>LoveIt</a>, gue tambahkan juga efek blur ketika user sedang fokus ke pencarian.</p>
<p>Implementasinya juga gampang. Jadi setelah tag <code>&lt;body&gt;</code> (<code>/layouts/_default/baseof.html</code>), gue tambahkan sebuah element div yang berfungsi sebagai masking.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">...[SNIP]...
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;mask&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">...[SNIP]...</span></span></code></pre>
</figure><p>Untuk CSSnya:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">#</span><span class="nn">mask</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background-repeat</span><span class="p">:</span> <span class="kc">no-repeat</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">background-position</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">z-index</span><span class="p">:</span> <span class="mi">-1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nt">body</span><span class="p">.</span><span class="nc">blur</span> <span class="o">&gt;</span> <span class="p">:</span><span class="nd">not</span><span class="o">(</span><span class="p">.</span><span class="nc">header</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kp">-webkit-</span><span class="k">filter</span><span class="p">:</span> <span class="nb">blur</span><span class="p">(</span><span class="mi">4</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kp">-moz-</span><span class="k">filter</span><span class="p">:</span> <span class="nb">blur</span><span class="p">(</span><span class="mi">4</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kp">-ms-</span><span class="k">filter</span><span class="p">:</span> <span class="nb">blur</span><span class="p">(</span><span class="mi">4</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kp">-o-</span><span class="k">filter</span><span class="p">:</span> <span class="nb">blur</span><span class="p">(</span><span class="mi">4</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">filter</span><span class="p">:</span> <span class="nb">blur</span><span class="p">(</span><span class="mi">4</span><span class="kt">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre>
</figure><p>Lalu behaviornya gue tambah di JS-nya <code>assets/js/fastsearch.js</code>:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="p">...[</span><span class="nx">SNIP</span><span class="p">]...</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">mask</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;mask&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">pageBody</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">bgBlur</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pageBody</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&#34;blur&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mask</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zIndex</span> <span class="o">=</span> <span class="s2">&#34;99&#34;</span><span class="p">;</span> <span class="c1">// z-index shouldn&#39;t be higher than the navbar/header
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">mask</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s2">&#34;rgba(0,0,0,0.25)&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">bgUnblur</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pageBody</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&#34;blur&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mask</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zIndex</span> <span class="o">=</span> <span class="s2">&#34;-1&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mask</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s2">&#34;rgba(0,0,0,0)&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> 	<span class="p">...[</span><span class="nx">SNIP</span><span class="p">]...</span>
</span></span><span class="line"><span class="cl">  <span class="nx">bgUnblur</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">searchInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="nx">bgBlur</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">mask</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="nx">reset</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;click&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&#34;.search-item&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="nx">reset</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span></span></span></code></pre>
</figure><p>Setelah itu, gue tinggal ngurus stylenya aja supaya search box dan hasil searchnya rapi sekaligus ngga tabrakan dengan menu navbar.</p>
<h2 id="toc-scrollspy">ToC ScrollSpy</h2>
<p>Gue balik lagi ngotak-ngatik bagian floating ToC yang sebelumnya udah gue bahas di revamp part satu. Kali ini, floating tocnya punya kemampuan mirip ScrollSpy dari Bootstrap. Singkatnya, ini fitur yang nge-highlight otomatis bagian item ToC mana yang sedang kita lihat atau baca berdasarkan posisi scroll.</p>
<h3 id="implementasi-1">Implementasi</h3>
<p>Untuk ini, bagian code ToC bawaan dari PaperMod yang sebelumnya cuma buat expand heading ToC aja, gue rombak penuh pakai bantuan ChatGPT. Karena codenya lumayan panjang, jadi gue simpen di <a href="https://gist.githubusercontent.com/fahmifj/1a2a00983476a15b350158e89fc1d462/raw/64b2a0506dbe7789b4f711e3238d21b5acf32220/toc.js"target="_blank" rel="noopener noreferrer"
>gist</a> aja deh.</p>
<h2 id="swup-for-dynamic-page-load">Swup for Dynamic Page Load</h2>
<p>Sebelumnya sempat mikir untuk pindah ke Gatsby atau NextJS yang punya SSR (Server-side rendering), simply cuma pengen transisi perhalamannya lebih seamless dan modern aja sih. Tapi gue urungkan, soalnya Hugo lebih friendly dan gampang dimanage.</p>
<p>Sekarang keinginan untuk punya transisi halaman secara seamless di Hugo ini bisa terwujud berkat <a href="https://swup.js.org/"target="_blank" rel="noopener noreferrer"
>Swup</a>. Singkatnya, meskipun gue pakai SSG seperti Hugo, Swup ini bisa ngasih pengalaman mirip SSR.</p>
<h3 id="implementasi-2">Implementasi</h3>
<p>Untuk implementasinya sendiri cukup mudah kok. Gue cuma perlu nentuin kontainer mana yang mau dijadiin sebagai area konten dinamiknya. Kontainer area konten gue disini adalah element <code>&lt;main&gt;</code>, lalu tinggal tag aja element ini dengan id <code>#swup</code> (<code>/layouts/_default/baseof.html)</code>:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">...[SNIP]...
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">main</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;swup&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main transition-fades&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="err">&lt;</span><span class="na">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;content-wrapper&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  	{{- block &#34;main&#34; . }}{{ end }}
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">...[SNIP]...</span></span></code></pre>
</figure><p>Masalahnya disini adalah Swup hanya mengupdate/mengganti elemen yang ada di dalam kontainer Swup (partial load). Script event listener, di luar kontainer Swup, ngga &lsquo;aware&rsquo; dengan partial load ini.</p>
<p>Saat partial load terjadi, elemen lama yang punya event listener akan diganti dengan elemen baru. Karena target elemennya hilang (elemen lama), aksi dari event listener juga ngga akan jalan.</p>
<p>Solusi masalah ini adalah me-reinisialasi semua event listener script dari element yang ada di dalam kontainer Swup setiap kali partial load terjadi.</p>
<p><code>custom.js</code>:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">swup</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Swup</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">initCustomFunction</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">initTOC</span><span class="p">(</span><span class="s2">&#34;.toc&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">profileClick</span><span class="p">(</span><span class="s2">&#34;.profile-img&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">restoreMenuScroll</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nx">updateActiveMenu</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hljs</span><span class="p">.</span><span class="nx">highlightAll</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1">// first init custom listeners
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;DOMContentLoaded&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">initCustomFunction</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1">// reinit on page ready
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">swup</span><span class="p">.</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&#34;page:view&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">initCustomFunction</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span></span></span></code></pre>
</figure><h2 id="end">End</h2>
<p>Baiklah, kurang lebih itu update revamp kali ini dan gue udah ngerasa cukup puaslah, terutama dibagian Swup. Soal revamp ini juga itung-itung refreshing skill web sih, jadi bakal gue lanjut di part berikutnya untuk bagian mobile (mungkin).</p>
<p>See you!</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Deploy a Hugo Site with Github Actions</title>
      <link>https://fahmifj.github.io/blog/blogging-with-hugo-part-2/</link>
      <pubDate>Mon, 01 Nov 2021 14:51:02 +0700</pubDate>
      
      <guid>https://fahmifj.github.io/blog/blogging-with-hugo-part-2/</guid>
      <description>Applying a small part of Continuous Deployment to your Hugo site</description>
      <content:encoded><![CDATA[<p>This is a continuation post from <a href="/blog/hugo-setup-and-deployment/"target="_blank" rel="noopener noreferrer"
>Hugo Setup and Deployment</a> in Hugo series.</p>
<p>In the previous post, we covered the basics of using Hugo. Not only the basics, we also learnt behind the scenes of SSG, getting your site published with GitHub Pages, and finally, we wrote a deployment script written in bash which is used to automatically update the blog&rsquo;s contents.</p>
<p>The last script we wrote actually is not an effective way to deploy our site because it will generate lots of new HTML files on our machine. With this way, instead of uploading only the files we modified, all these files will be uploaded to the Internet every time we update our site. If you care about network bandwidth or things like SSD endurance, that&rsquo;s probably not a good thing. Luckily, we can solve this with GitHub Actions.</p>
<p>GitHub Actions basically does the same thing as our deployment script, but, instead of using our own machine to generate and push the HTML files, we&rsquo;ll let GitHub VM orDocker instances do it for us.</p>
<p>In this post, we&rsquo;ll focus more on the deployment side.</p>
<h4 id="goals">Goals</h4>
<ul>
<li>Automate Site Deployment using GitHub Actions</li>
<li>Use theme as submodule</li>
</ul>
<h4 id="prerequisites">Prerequisites</h4>
<p>Prerequisites are still the same, they are:</p>
<ul>
<li>A GitHub account</li>
<li>Familiarity with CLI</li>
<li>Familiarity with Git.</li>
</ul>
<h2 id="preparation">Preparation</h2>
<h3 id="clean-up">Clean Up</h3>
<p>Let&rsquo;s start by reviewing the previous site structure, here&rsquo;s where we left it:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ tree -a -L <span class="m">2</span> -I <span class="s2">&#34;\.git&#34;</span>
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">â”œâ”€â”€ .gitmodules
</span></span><span class="line"><span class="cl">â”œâ”€â”€ archetypes
</span></span><span class="line"><span class="cl">â”‚Â Â  â””â”€â”€ default.md
</span></span><span class="line"><span class="cl">â”œâ”€â”€ config.yml
</span></span><span class="line"><span class="cl">â”œâ”€â”€ content
</span></span><span class="line"><span class="cl">â”‚Â Â  â””â”€â”€ post
</span></span><span class="line"><span class="cl">â”œâ”€â”€ data
</span></span><span class="line"><span class="cl">â”œâ”€â”€ deploy.sh
</span></span><span class="line"><span class="cl">â”œâ”€â”€ layouts
</span></span><span class="line"><span class="cl">â”œâ”€â”€ public <span class="c1"># &lt;-- All files under this folder are hosted using GitHub Pages,</span>
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ 404.html
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ assets
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ categories
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ en
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ fa
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ fr
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ index.html
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ index.json
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ index.xml
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ page
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ post
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ robots.txt
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ series
</span></span><span class="line"><span class="cl">â”‚Â Â  â”œâ”€â”€ sitemap.xml
</span></span><span class="line"><span class="cl">â”‚Â Â  â””â”€â”€ tags
</span></span><span class="line"><span class="cl">â”œâ”€â”€ resources
</span></span><span class="line"><span class="cl">â”‚Â Â  â””â”€â”€ _gen
</span></span><span class="line"><span class="cl">â”œâ”€â”€ static
</span></span><span class="line"><span class="cl">â””â”€â”€ themes
</span></span><span class="line"><span class="cl">    â””â”€â”€ PaperMod
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">20</span> directories, <span class="m">10</span> files</span></span></code></pre>
</figure><p>We&rsquo;ll now ignore the public folder and remove all of its content including the git repository inside it because this will be handled by GitHub Actions later.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ rm ./public/* -r f
</span></span><span class="line"><span class="cl">$ rm ./public/.git -rf</span></span></code></pre>
</figure><p>If you happen to use the <code>public</code> folder as a submodule, remove the following lines from <code>.git/config</code> and  <code>.gitmodules</code></p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">[submodule &#34;public&#34;]
</span></span><span class="line"><span class="cl">        url = https://github.com/your-username/my-blog.git
</span></span><span class="line"><span class="cl">        active = true</span></span></code></pre>
</figure><p>Clean any cached content from the <code>public</code> folder.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git rm --cached ./public -f</span></span></code></pre>
</figure><p>Then let&rsquo;s create another GitHub repository with the format <code>your-username.github.io</code>, because we&rsquo;re going to use this repo as the remote repository of our site.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git remote add origin https://github.com/your-username/your-username.github.io.git</span></span></code></pre>
</figure><p>For the <code>config.yaml</code>, change the baseURL value with:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">baseURL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://your-username.github.io/&#34;</span></span></span></code></pre>
</figure><h3 id="add-the-theme-as-submodule">Add the Theme as Submodule</h3>
<p>If you happen to not using theme as submodule previously, this time we will.</p>
<p>Run the following command to add the PaperMod theme we cloned previously as a submodule of our site.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod</span></span></code></pre>
</figure><p>If you don&rsquo;t use the same theme, simply replace the url and directory parts to match yours.</p>
<h2 id="configure-github-actions">Configure Github Actions</h2>
<p>In the deployment script, we&rsquo;ve automated several things: site build, commit, and push our site to GitHub. We can call the execution of this script as a <strong>workflow</strong> that runs a single <strong>job</strong>, it is to deploy our site. Each command executed within the deployment script (build, commit, push) can be referred as a <strong>step</strong>.</p>
<p>GitHub Actions are basically the advanced version of the deployment script we created. It&rsquo;s event-driven, which means we can set a specific event to trigger the workflow. In this case, we&rsquo;ll create an event that will trigger the site deployment each time we push a new commit to the main branch.</p>
<h3 id="create-the-workflow">Create the Workflow</h3>
<p>A workflow file for GitHub Actions must be written in YAML syntax, and it&rsquo;s placed under a special directory called <code>.github/workflows/[here].yml</code>, so let&rsquo;s create the folder first inside our site repository.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ mkdir -p ./.github/workflows</span></span></code></pre>
</figure><p>We&rsquo;ll save the following codes under the workflow directory with a name <code>gh-pages.yml</code> (<code>./.github/workflows/gh-pages.yml</code>).</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">github pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># the event</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">push</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">main </span><span class="w"> </span><span class="c"># Set a branch to deploy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">deploy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-18.04</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">submodules</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">  </span><span class="c"># Fetch Hugo themes (true OR recursive)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">fetch-depth</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">    </span><span class="c"># Fetch all history for .GitInfo and .Lastmod</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Setup Hugo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">peaceiris/actions-hugo@v2 </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">hugo-version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;latest&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">extended</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Build </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l">hugo --minify --cleanDestinationDir</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deploy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">peaceiris/actions-gh-pages@v3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">github_token</span><span class="p">:</span><span class="w"> </span><span class="l">${{ secrets.GITHUB_TOKEN }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">publish_dir</span><span class="p">:</span><span class="w"> </span><span class="l">./public</span></span></span></code></pre>
</figure><p>You can study the code yourself, because I&rsquo;m not the one who created it ðŸ˜…. But, to make sure that the public folder always get cleaned first before build, I added the <code>--cleanDestinationDir</code> option.</p>
<p>Let&rsquo;s commit this workflow and push it to GitHub.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git add ./.github/workflows/gh-pages.yml
</span></span><span class="line"><span class="cl">$ git commit -m <span class="s2">&#34;Add gh-pages.yml&#34;</span>
</span></span><span class="line"><span class="cl">$ git push -u origin main</span></span></code></pre>
</figure><h3 id="trigger-the-workflow">Trigger the Workflow!</h3>
<p>We can create a new post, then add some text to it.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ hugo new post/test-gh-actions.md
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="s1">&#39;Test GH Action&#39;</span> &gt;&gt; content/post/test-gh-actions.md</span></span></code></pre>
</figure><p>Finally, commit the change and push it to your repository to trigger the workflow</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git commit -m <span class="s2">&#34;Trigger build&#34;</span>
</span></span><span class="line"><span class="cl">$ git push -u origin main</span></span></code></pre>
</figure><p>To observe the deployment process/workflow, we can navigate to the site repository and click on the Actions menu (<code>https://github.com/your-username/your-username.github.io/actions</code>).</p>
<p>Revisit your site to verify.</p>
<h2 id="off-topic">Off-Topic</h2>
<h3 id="my-current-deployment">My Current Deployment</h3>
<p>My deployment process is a little bit different. This is because I&rsquo;ve separated my blog into two repositories: <code>blog-core</code> and  <code>fahmifj.github.io</code> .  The blog-core repo is a private repo that contains all of my site resources in raw. The <code>fahmifj.github.io</code> repo is a public repository that contains all the generated html from the <code>blog-core</code> repo.</p>
<p>I added a GitHub Actions workflow in the <code>blog-core</code> repo. It runs automatically when I update the repo, generates static HTML files, and then pushes them to the public repo. This <code>blog-core</code> repo held my secret token, which GitHub Actions uses to authenticate and make changes to the public repo.</p>
<p><div class="img-container"><img src="imgs/image-20211102111943965.png" alt="image-20211102111943965"  /></div>
</p>
<blockquote>
<p>Note: these are not the actual commands.</p>
</blockquote>
<p>Well, it&rsquo;s not in detail, but it should give you an idea of how it works. Visit this <a href="https://victoria.dev/blog/two-ways-to-deploy-a-public-github-pages-site-from-a-private-hugo-repository/"target="_blank" rel="noopener noreferrer"
>site</a> if you want to learn more about it.</p>
<p>See you in another post!</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Revamping My Blog Part I: Layout &amp; Navigation</title>
      <link>https://fahmifj.github.io/blog/revamping-my-blog-part-1/</link>
      <pubDate>Fri, 15 Oct 2021 07:28:41 +0700</pubDate>
      
      <guid>https://fahmifj.github.io/blog/revamping-my-blog-part-1/</guid>
      <description>Mod the PaperMod</description>
      <content:encoded><![CDATA[<p>Belakangan ini, gue agak telat nulis write-up ctf, tapi akhirnya minggu ini semua selesai. Semingguan yang lalu gue terdistract karena pengen nyari tema baru sebagai bahan <del>nyontek</del> inspirasi untuk melakukan revamp blog ini.</p>
<p>Di postingan ini, gue akan membahas sedikit bagian tentang perubahan yang gue lakuin. Sebenarnya ini sebagai catatan pribadi aja tapi mungkin jadi referensi bagi yang mampir.</p>
<p>Desain kasarnya bisa dilihat digambar berikut.</p>
<p><div class="img-container"><img src="imgs/image-20211015074555598.png" alt="image-20211015074555598"  /></div>
<small>The power of Ms. Paint</small></p>
<h2 id="floating-toc">Floating ToC</h2>
<p>Tulisan yang gue posting pada umumnya adalah semacam tutorial atau <em>walkthrough</em>. Menurut gue <em>floating</em> ToC (Table of Content) adalah salah satu hal yang diperlukan oleh pembaca untuk bisa dengan mudah &ldquo;loncat&rdquo; antar <em>section</em> tanpa harus scroll panjang. Tema <a href="https://github.com/adityatelange/hugo-PaperMod/"target="_blank" rel="noopener noreferrer"
>PaperMod</a> ini sudah punya fitur ToC bawaan, tapi bukan model <em>floating</em> melainkan menjadi satu di dalam artikel. Jadi disini gue ubah bagian ToC ini supaya UXnya lebih friendly.</p>
<h3 id="implementasi">Implementasi</h3>
<p>Saat ini Posisi ToC menjadi satu dengan kontainer area konten/artikel, jadi bagian ini harus gue pisah dulu. Caranya gue buat satu kontainer flex baru sebagai <em>parent</em> kontainer untuk kontainer area konten dan kontainer area toc. Kemudian gue bagi area kontainer flex tersebut menjadi dua bagian dengan rasio <strong>3:7</strong>, dimana <strong>3</strong> untuk area toc sedangkan <strong>7</strong> untuk area konten.</p>
<p>Ilustrasinya seperti berikut.</p>
<p><div class="img-container"><img src="imgs/image-20211015105411374.png" alt="image-20211015105411374"  /></div>
</p>
<p>Agar area konten bisa tetap memakai penuh lebar halaman seperti sebelumnya, hal selanjutnya adalah mengeluarkan kontainer area ToC ini dari kontainer <em>parent</em>-nya dengan meminuskan properti <code>margin-left</code>-nya sebesar lebarnya sendiri yaitu: <code>-1*0.3*100%</code>.</p>
<p><div class="img-container"><img src="imgs/image-20211015111941266.png" alt="image-20211015111941266"  /></div>
</p>
<p>Sisanya hanya tinggal <em>styling</em> dan penyesuaian posisi dari ToC tersebut. Desain ToC ini terinspirasi dari blognya <a href="https://0xdf.gitlab.io/"target="_blank" rel="noopener noreferrer"
>0xdf</a> yang pakai <a href="https://afeld.github.io/bootstrap-toc/"target="_blank" rel="noopener noreferrer"
>bootstrap toc</a>.</p>
<h2 id="latest-posts">Latest Posts</h2>
<p>Selanjutnya adalah bagian &ldquo;Latests Posts&rdquo; yang dimaksudkan untuk menampilkan beberapa tulisan terakhir yang udah gue publikasi.</p>
<p><div class="img-container"><img src="imgs/image-20211015132036300.png" alt="image-20211015132036300"  /></div>
</p>
<h3 id="implementasi-1">Implementasi</h3>
<p>Penambahan bagian &ldquo;Latests Posts&rdquo; ini sebenarnya hanya sekadar <em>copy paste</em> template halaman <a href="/archives"target="_blank" rel="noopener noreferrer"
>arsip</a> yang dibuat ke template parsial lalu dipanggil di <code>layouts/_default/list.html</code>.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="o">-</span> <span class="k">if</span> <span class="p">(</span><span class="nx">and</span> <span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">profileMode</span><span class="p">.</span><span class="nx">enabled</span> <span class="p">.</span><span class="nx">IsHome</span><span class="p">)</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="o">-</span> <span class="nx">partial</span> <span class="s">&#34;c_profilemode.html&#34;</span> <span class="p">.</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="o">-</span> <span class="nx">partial</span> <span class="s">&#34;c_latest_posts.html&#34;</span> <span class="p">.</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span></span></span></code></pre>
</figure><p>Dan berikut potongan kode yang relevan dari template  <code>layouts/partials/c_latest_posts.html</code>:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl">  <span class="p">{{</span> <span class="k">range</span> <span class="nx">first</span> <span class="mi">5</span> <span class="p">(.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">RegularPages</span><span class="p">)</span> <span class="p">}}</span> <span class="cm">/* index 0 = newest, show 5 latest*/</span>
</span></span><span class="line"><span class="cl">  <span class="p">{{</span> <span class="p">.</span><span class="nx">Title</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="p">{{</span> <span class="p">.</span><span class="nx">Date</span><span class="p">.</span><span class="nx">Format</span> <span class="s">&#34;Jan 02&#34;</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="p">{{</span><span class="o">-</span> <span class="nx">printf</span> <span class="s">&#34;%d min&#34;</span> <span class="p">.</span><span class="nx">ReadingTime</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">  <span class="o">...</span>
</span></span><span class="line"><span class="cl">  <span class="p">{{</span><span class="o">-</span> <span class="nx">end</span> <span class="p">}}</span></span></span></code></pre>
</figure><p>Desain untuk &ldquo;Latests Posts&rdquo; ini terinspirasi dari tema <a href="https://github.com/Track3/hermit"target="_blank" rel="noopener noreferrer"
>Hermit</a>, <a href="https://faultable.dev/"target="_blank" rel="noopener noreferrer"
>faultable.dev</a>, dan <a href="https://www.taniarascia.com/"target="_blank" rel="noopener noreferrer"
>taniarascia.com</a>.</p>
<h2 id="tags-in-post-entry">Tags in Post Entry</h2>
<p>Menampilkan tag pada <em>post entry</em> ini simplenya bermaksud untuk memberi gambaran tentang topik apa yang dibahas di dalam postingan tersebut.</p>
<p><div class="img-container"><img src="imgs/image-20211015144040968.png" alt="image-20211015144040968"  /></div>
</p>
<h3 id="implementasi-2">Implementasi</h3>
<p>Untuk menampilkan tag di setiap <em>post entry</em>, gue perlu ngubah total struktur HTML untuk <em>post entry</em> (bisa di-inspect aja ya). Lalu kode yang digunakan untuk menampilkan tag beserta tautannya merupakan modifikasi dari kode yang ada pada dokumentasi Hugo ini: <a href="https://gohugo.io/templates/taxonomy-templates/#example-comma-delimit-tags-in-a-single-page-template"target="_blank" rel="noopener noreferrer"
>Taxonomy Templates | Hugo (gohugo.io)</a>.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="p">{{</span> <span class="err">$</span><span class="nx">taxo</span> <span class="o">:=</span> <span class="s">&#34;tags&#34;</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span> <span class="nx">with</span> <span class="p">.</span><span class="nx">Param</span> <span class="err">$</span><span class="nx">taxo</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">	<span class="p">{{</span> <span class="err">$</span><span class="nx">tag_limit</span> <span class="o">:=</span> <span class="mi">7</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">	<span class="p">{{</span> <span class="k">if</span> <span class="nf">ne</span> <span class="p">(</span><span class="nx">len</span> <span class="p">.)</span> <span class="mi">0</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">		<span class="p">{{</span><span class="o">-</span> <span class="k">range</span> <span class="err">$</span><span class="nx">k</span><span class="p">,</span> <span class="err">$</span><span class="nx">v</span> <span class="o">:=</span> <span class="p">.</span> <span class="o">-</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">		<span class="p">{{</span> <span class="k">if</span> <span class="nf">lt</span> <span class="p">(</span><span class="nx">add</span> <span class="err">$</span><span class="nx">k</span> <span class="mi">1</span><span class="p">)</span> <span class="err">$</span><span class="nx">tag_limit</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">			<span class="p">{{</span><span class="o">-</span> <span class="k">if</span> <span class="nf">and</span> <span class="p">(</span><span class="nx">gt</span> <span class="err">$</span><span class="nx">k</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span><span class="p">}}</span><span class="err">Â·</span><span class="o">&amp;</span><span class="nx">nbsp</span><span class="p">;{{</span><span class="o">-</span> <span class="nx">end</span> <span class="o">-</span><span class="p">}}</span> 
</span></span><span class="line"><span class="cl">			<span class="p">{{</span><span class="o">-</span> <span class="nx">with</span> <span class="err">$</span><span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nf">GetPage</span> <span class="p">(</span><span class="nx">printf</span> <span class="s">&#34;/%s/%s&#34;</span> <span class="err">$</span><span class="nx">taxo</span> <span class="err">$</span><span class="nx">v</span><span class="p">)</span> <span class="o">-</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">			<span class="p">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="p">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;{{</span><span class="o">-</span> <span class="err">$</span><span class="nx">v</span> <span class="o">-</span><span class="p">}}&lt;</span><span class="o">/</span><span class="nx">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="p">{{</span><span class="o">-</span> <span class="nx">end</span> <span class="o">-</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">			<span class="p">{{</span><span class="o">-</span> <span class="nx">end</span> <span class="o">-</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">		<span class="p">{{</span><span class="o">-</span> <span class="nx">end</span> <span class="o">-</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">	<span class="p">{{</span><span class="o">-</span> <span class="nx">end</span> <span class="o">-</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span> <span class="nx">end</span> <span class="p">}}</span></span></span></code></pre>
</figure><p>Setelah tagnya muncul, gue tinggal menyesuaikan stylenya aja.</p>
<h2 id="to-be-contd">To be cont&rsquo;d</h2>
<p>Selain 3 hal diatas, ada beberapa elemen dan fitur bawaan yang diotak-atik seperti fitur <em>pagination</em> yang gue buang, pembaruan <em>search indexing</em>, <em>fixed</em> navbar, atau bahkan cuma sekadar iseng coba-coba animasi CSS pseudo selector yang <del>nyolong</del> terinspirasi dari situsnya <a href="https://yui540.design/"target="_blank" rel="noopener noreferrer"
>yui540</a> dan <a href="https://sai-chan.com/"target="_blank" rel="noopener noreferrer"
>sai-chan</a>.</p>
<p>Karena revamp ini masih berantakan, jadi akan gue lanjut di waktu yang lain. See you!</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Blogging with Hugo: Setup and Deployment</title>
      <link>https://fahmifj.github.io/blog/blogging-with-hugo-part-1/</link>
      <pubDate>Sun, 13 Jun 2021 11:12:48 +0700</pubDate>
      
      <guid>https://fahmifj.github.io/blog/blogging-with-hugo-part-1/</guid>
      <description>Pretty basic tutorial to setup up a site using Hugo</description>
      <content:encoded><![CDATA[<p>Hello, readers!</p>
<p>In this post, I will share my documentation about how I deployed my current blog using Hugo.</p>
<h4 id="goals">Goals</h4>
<p>By the end of this post, you will be able to</p>
<ul>
<li>Creating a Site with Hugo</li>
<li>Deploying your site to internet using GitHub pages</li>
</ul>
<h4 id="prerequisites">Prerequisites</h4>
<p>There are some prerequisites needed to accomplish these goals:</p>
<ul>
<li>A GitHub account</li>
<li>Familiarity with CLI commands and basic Git workflow</li>
<li><a href="https://git-scm.com/downloads"target="_blank" rel="noopener noreferrer"
>Git Bash</a> for Windows users</li>
</ul>
<p>If you don&rsquo;t meet any of these prerequisites, just follow along!</p>
<h2 id="installing-hugo">Installing Hugo</h2>
<p>First thing first, we&rsquo;ll need the Hugo executable binary, which you can grab it <a href="https://github.com/gohugoio/hugo/releases"target="_blank" rel="noopener noreferrer"
>here</a>.</p>
<p>Pick your Hugo version according to what OS youâ€™re running. For this tutorial, I will be using Hugo for Windows OS. There is also the extended version, which you should use if youâ€™re going to create or pick Hugo&rsquo;s theme that uses Sass/SCSS.</p>
<p>Once the download is completed, just extract it somewhere on your system.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ls -l
</span></span><span class="line"><span class="cl">total <span class="m">47488</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> Fahmi FJ <span class="m">197121</span>    <span class="m">11357</span> Mar <span class="m">22</span> 00:17 LICENSE
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> Fahmi FJ <span class="m">197121</span>    <span class="m">12345</span> Mar <span class="m">22</span> 00:17 README.md
</span></span><span class="line"><span class="cl">-rwxr-xr-x <span class="m">1</span> Fahmi FJ <span class="m">197121</span> <span class="m">48599040</span> Mar <span class="m">22</span> 01:04 hugo.exe</span></span></code></pre>
</figure><p>Run <code>hugo version</code>:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ hugo.exe version
</span></span><span class="line"><span class="cl">hugo v0.82.0-9D960784+extended windows/amd64 <span class="nv">BuildDate</span><span class="o">=</span>2021-03-21T17:28:04Z <span class="nv">VendorInfo</span><span class="o">=</span>gohugoio</span></span></code></pre>
</figure><p>At this time, Hugoâ€™s binary is not available in the system-wide, in other words, it couldn&rsquo;t be called outside the current directory where you just extracted it. Therefore, we&rsquo;ll add the folder&rsquo;s path, where the binary or executable file lives on, to <a href="https://en.wikipedia.org/wiki/Environment_variable"target="_blank" rel="noopener noreferrer"
>PATH variable</a>.</p>
<h3 id="system-wide-in-windows">System-wide in Windows</h3>
<p>For Windows users, let&rsquo;s create a folder called <code>bin</code> in <code>C:/</code> .</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">C:<span class="se">\&gt;</span>mkdir bin</span></span></code></pre>
</figure><p>Once the folder is created, move your Hugo binary into it.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">C:<span class="se">\&gt;</span>dir bin
</span></span><span class="line"><span class="cl"> Volume in drive C is Windows
</span></span><span class="line"><span class="cl"> Volume Serial Number is AC06-7D93
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> Directory of C:<span class="se">\b</span>in
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">13/06/2021  08:07    &lt;DIR&gt;          .
</span></span><span class="line"><span class="cl">13/06/2021  08:07    &lt;DIR&gt;          ..
</span></span><span class="line"><span class="cl">22/03/2021  01:04        48.599.040 hugo.exe
</span></span><span class="line"><span class="cl">               <span class="m">1</span> File<span class="o">(</span>s<span class="o">)</span>     48.599.040 bytes
</span></span><span class="line"><span class="cl">               <span class="m">2</span> Dir<span class="o">(</span>s<span class="o">)</span>  57.909.837.824 bytes free</span></span></code></pre>
</figure><p>After that, hit <code>Win + R</code> on your keyboard, type the following command and hit enter:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">rundll32.exe sysdm.cpl,EditEnvironmentVariables</span></span></code></pre>
</figure><p>You should see a window titled &ldquo;Environment Variables&rdquo;. Now we&rsquo;re going to edit the <code>Path</code> variable there.</p>
<p><div class="img-container"><img src="imgs/image-20210613081626397.png" alt="image-20210613081626397"  /></div>
</p>
<p>On the edit window, add a new path and type <code>C:\bin</code>.</p>
<p><div class="img-container"><img src="imgs/image-20210613082450289.png" alt="image-20210613082450289"  /></div>
</p>
<p>After that, just hit all the <strong>OK</strong> button.</p>
<p>Then re-open your Windows terminal and run <code>hugo version</code>. If it returns the same output as previous one, then go to the next section.</p>
<h3 id="system-wide-in-linux">System-wide in Linux</h3>
<p>For Linux users, let&rsquo;s create a folder called <code>bin</code> under <code>/home/username/.local/[here]</code>.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ mkdir -p ~/.local/bin</span></span></code></pre>
</figure><p>Then move your Hugo binary into the newly created <code>bin</code> folder.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ mv /previous/path/of/hugo ~/.local/bin/hugo</span></span></code></pre>
</figure><p>Next, open your <code>.bashrc</code> or <code>.zshrc</code> file which is located at <code>/home/username/.(zsh|bash)rc</code> with your favorite text editor such as vim, and then simply add these lines at the top of your <code>.bashrc/.zshrc</code> file.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">PATH_HUGO=&#39;/home/username/.local/bin&#39;
</span></span><span class="line"><span class="cl">export PATH=$PATH_HUGO:$PATH</span></span></code></pre>
</figure><p>Re-open your terminal and run <code>hugo version</code> from any directory and see if it&rsquo;s returns the version.</p>
<h2 id="creating-first-site">Creating First Site</h2>
<h3 id="init-workspace">Init Workspace</h3>
<p>We can create a site in anywhere by issuing the command below.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ hugo new site <span class="o">[</span>site-name<span class="o">]</span></span></span></code></pre>
</figure><blockquote>
<p>I recommend you to create a site in a specific folder such as <code>workspace</code> or something like <code>/workspace/your.blog.domain.com</code></p>
</blockquote>
<p>For now, let&rsquo;s call our new site <code>my-blog</code>.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ hugo new site my-blog -f yml
</span></span><span class="line"><span class="cl">Congratulations! Your new Hugo site is created in C:<span class="se">\U</span>sers<span class="se">\f</span>ahmi<span class="se">\D</span>esktop<span class="se">\t</span>est<span class="se">\m</span>y-blog.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Just a few more steps and you<span class="err">&#39;</span>re ready to go:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1. Download a theme into the same-named folder.
</span></span><span class="line"><span class="cl">   Choose a theme from https://themes.gohugo.io/ or
</span></span><span class="line"><span class="cl">   create your own with the <span class="s2">&#34;hugo new theme &lt;THEMENAME&gt;&#34;</span> command.
</span></span><span class="line"><span class="cl">2. Perhaps you want to add some content. You can add single files
</span></span><span class="line"><span class="cl">   with <span class="s2">&#34;hugo new &lt;SECTIONNAME&gt;\&lt;FILENAME&gt;.&lt;FORMAT&gt;&#34;</span>.
</span></span><span class="line"><span class="cl">3. Start the built-in live server via <span class="s2">&#34;hugo server&#34;</span>.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Visit https://gohugo.io/ <span class="k">for</span> quickstart guide and full documentation.</span></span></code></pre>
</figure><p>We see that Hugo creates a new folder called  <code>my-blog</code> at <code>C:\Users\fahmi\Desktop\test\my-blog</code>, and this <code>my-blog</code> has the following directory structure:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">my-blog
</span></span><span class="line"><span class="cl">â”œâ”€â”€ archetypes
</span></span><span class="line"><span class="cl">â”‚Â Â  â””â”€â”€ default.md
</span></span><span class="line"><span class="cl">â”œâ”€â”€ config.yaml
</span></span><span class="line"><span class="cl">â”œâ”€â”€ content
</span></span><span class="line"><span class="cl">â”œâ”€â”€ data
</span></span><span class="line"><span class="cl">â”œâ”€â”€ layouts
</span></span><span class="line"><span class="cl">â”œâ”€â”€ static
</span></span><span class="line"><span class="cl">â””â”€â”€ themes</span></span></code></pre>
</figure><p>We can host that site locally by typing <code>hugo server</code> within <code>my-blog</code> directory. By default, the site is hosted at <code>http://localhost:1313/</code>.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="nb">cd</span> my-blog
</span></span><span class="line"><span class="cl">$ hugo server</span></span></code></pre>
</figure><p>Since we haven&rsquo;t added any content yet, the site will be empty.</p>
<h2 id="using-a-theme">Using a Theme</h2>
<p>Since my blog uses a theme called <a href="https://themes.gohugo.io/hugo-papermod/"target="_blank" rel="noopener noreferrer"
>PaperMod</a>, we&rsquo;ll be using that too here. For other themes, have a look at <a href="https://themes.gohugo.io/"target="_blank" rel="noopener noreferrer"
>https://themes.gohugo.io/</a>.</p>
<p>To add the PaperMod theme by cloning it into the <code>my-blog/themes/</code> directory/</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ git clone https://github.com/adityatelange/hugo-PaperMod themes/PaperMod --depth<span class="o">=</span><span class="m">1</span></span></span></code></pre>
</figure><p>Then replace/overwrite our <code>config.yml</code> with <a href="https://raw.githubusercontent.com/adityatelange/hugo-PaperMod/exampleSite/config.yml"target="_blank" rel="noopener noreferrer"
>this</a> one, and modify the value of <code>baseUrl</code> and <code>theme</code> to these:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">baseURL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">theme</span><span class="p">:</span><span class="w"> </span><span class="l">PaperMod</span></span></span></code></pre>
</figure><p>Let&rsquo;s see how it looks like by visiting <code>http://localhost:1313</code> on the browser after we run this command.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ hugo server</span></span></code></pre>
</figure><h2 id="creating-first-post">Creating First Post</h2>
<p>We can create a new post by issuing the following command:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ hugo new post/new-post.md</span></span></code></pre>
</figure><p>You can edit <code>new-post.md</code> after that, the file should be under <code>my-blog/content/post/[here]</code>.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ls -l my-blog/content/post/
</span></span><span class="line"><span class="cl">total <span class="m">1</span>
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> Fahmi FJ <span class="m">197121</span> <span class="m">70</span> Jun <span class="m">13</span> 09:34 my-post.md</span></span></code></pre>
</figure><p>To see your post in the site, change the value <code>draft</code> from <code>true</code> to <code>false</code>:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;My Post&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">date</span><span class="p">:</span><span class="w"> </span><span class="ld">2021-06-13T09:34:43</span><span class="m">+07</span><span class="p">:</span><span class="m">00</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">draft</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">My first post</span></span></span></code></pre>
</figure><p>It should be on your site now.</p>
<h2 id="publish-your-site-on-github">Publish Your Site on GitHub</h2>
<p>One thing you need to know is that when you run <code>$ hugo server</code>, Hugo generates all the site resources (html, images, etc.) and serves them directly from memory. But, if you just run <code>$ hugo</code>, Hugo generates all the site resources under the <code>public</code> folder (<code>my-blog/public/[here]</code>).</p>
<figure class="highlight">
    <pre tabindex="0"><code class="language-" data-lang="">my-blog
â”œâ”€â”€ archetypes
â”‚Â Â  â””â”€â”€ default.md
â”œâ”€â”€ config.yaml
â”œâ”€â”€ content
â”œâ”€â”€ data
â”œâ”€â”€ layouts
â”œâ”€â”€ static
â””â”€â”€ themes</code></pre>
</figure><p>These files in the <code>public</code> folder are the files that we are going to publish on GitHub. We can simply upload all the files in the <code>public</code> folder into a GitHub repository.</p>
<p>But, before that, you have to change your site&rsquo;s <strong>base URL</strong> in <code>config.yml</code> to:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">baseURL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://[your_user_name].github.io/my-blog/&#34;</span></span></span></code></pre>
</figure><p>For example, my username is <code>fahmifj</code> , so my config would be:</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">baseURL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://fahmifj.github.io/my-blog/&#34;</span></span></span></code></pre>
</figure><p>Once you done with the config, type <code>hugo</code> within the root directory of your site to re-generate all the site resources.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ hugo
</span></span><span class="line"><span class="cl">Start building sites â€¦
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                   <span class="p">|</span> EN <span class="p">|</span> FR <span class="p">|</span> FA
</span></span><span class="line"><span class="cl">-------------------+----+----+-----
</span></span><span class="line"><span class="cl">  Pages            <span class="p">|</span> <span class="m">14</span> <span class="p">|</span> <span class="m">10</span> <span class="p">|</span> <span class="m">10</span>
</span></span><span class="line"><span class="cl">  Paginator pages  <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Non-page files   <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Static files     <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Processed images <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Aliases          <span class="p">|</span>  <span class="m">3</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">1</span>
</span></span><span class="line"><span class="cl">  Sitemaps         <span class="p">|</span>  <span class="m">2</span> <span class="p">|</span>  <span class="m">1</span> <span class="p">|</span>  <span class="m">1</span>
</span></span><span class="line"><span class="cl">  Cleaned          <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Total in <span class="m">147</span> ms</span></span></code></pre>
</figure><p>Now, let&rsquo;s navigate to Github and <a href="https://docs.github.com/en/github/getting-started-with-github/quickstart/create-a-repo"target="_blank" rel="noopener noreferrer"
>create a new repository</a> called <code>my-blog</code>. Once the repo is created, click on <strong>Upload an existing file</strong>.</p>
<p><div class="img-container"><img src="imgs/image-20210613095820873.png" alt="image-20210613095820873"  /></div>
</p>
<p>Then simply drag and drop all the files from the <code>my-blog/public</code> folder there.</p>
<p><div class="img-container"><img src="imgs/image-20210613095945135.png" alt="image-20210613095945135"  /></div>
</p>
<p>Once all the files are uploaded, commit the changes. I&rsquo;ll just leave the default commit message.</p>
<p><div class="img-container"><img src="imgs/image-20210613101009392.png" alt="image-20210613101009392"  /></div>
</p>
<p>After that, let&rsquo;s head to the repository settings and find the Github Pages menu or visit <a href="https://github.com/your-username/my-blog/settings/pages"target="_blank" rel="noopener noreferrer"
>https://github.com/your-username/my-blog/settings/pages</a>.</p>
<p>Since we&rsquo;ll host this whole repository using GitHub pages, we need to define our &ldquo;Source&rdquo; which is the root directory of main branch, and then click on the Save button.</p>
<p><div class="img-container"><img src="imgs/image-20210613101748114.png" alt="image-20210613101748114"  /></div>
</p>
<p>Once you done with that, navigate to <code>https://yourusername.github.io/my-blog</code>, and you should see your site there.</p>
<p><div class="img-container"><img src="imgs/image-20210613101715896.png" alt="image-20210613101715896"  /></div>
</p>
<p>If you don&rsquo;t see it or the page returns a 404 error, then just wait for a few minutes more because our site needs to be cached by the Internet.</p>
<h2 id="deployment-script">Deployment Script</h2>
<p>Finally, we can semi-automate the deployment process with a bash script.</p>
<p>Letâ€™s go back to the directory of <code>my-blog </code> and then initialize <code>public</code> folder as a git repository. We&rsquo;ll also add the <code>public</code> folder as a submodule.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="nb">cd</span> public
</span></span><span class="line"><span class="cl">$ git init
</span></span><span class="line"><span class="cl">$ git remote add origin https://github.com/your-username/my-blog.git</span></span></code></pre>
</figure><p>Now let&rsquo;s create a deployment script at the site root directory and name it as <code>deploy.sh</code>.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;\033[0;32mDeploying blog to GitHub...\033[0m&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Clean public folder</span>
</span></span><span class="line"><span class="cl">hugo --cleanDestinationDir
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Go to to public folder</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> public/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Add untracked files, hide output</span>
</span></span><span class="line"><span class="cl">git add -A &gt; /dev/null
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Generate a fixed commit message with date and time</span>
</span></span><span class="line"><span class="cl"><span class="nv">msg</span><span class="o">=</span><span class="s2">&#34;[`date &#34;</span>+%R %d-%h-%Y<span class="s2">&#34;]` Site update&#34;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="c1"># Check for additional commit message</span>
</span></span><span class="line"><span class="cl"><span class="nb">read</span> -p <span class="s2">&#34;Add commit message: &#34;</span> add_msg
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$add_msg</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;&#34;</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">	<span class="k">then</span> 
</span></span><span class="line"><span class="cl">	<span class="nv">msg</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$msg</span><span class="s2"> - </span><span class="nv">$add_msg</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;</span><span class="nv">$msg</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Deploy</span>
</span></span><span class="line"><span class="cl">git push -u origin main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Go back to the root directory</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ../</span></span></code></pre>
</figure><p>You can run the script on Windows if you have Git Bash installed or WSL.</p>
<p>Let&rsquo;s create another post to test the deployment script.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ hugo new post/second-post.md
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="s1">&#39;This is second post&#39;</span> &gt;&gt; content/post/second-post.md</span></span></code></pre>
</figure><p>Don&rsquo;t forget to change the value of <code>draft</code>  from <code>true</code> to <code>false</code>, here is a small trick with <code>sed</code>.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ sed -i <span class="s1">&#39;s/draft: false/draft: true/g&#39;</span> content/post/second-post.md</span></span></code></pre>
</figure><p>Now we can run the script after giving it execute permission.</p>
<figure class="highlight">
    <pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ chmod +x deploy.sh
</span></span><span class="line"><span class="cl">$ ./deploy.sh
</span></span><span class="line"><span class="cl">Deploying blog to GitHub...
</span></span><span class="line"><span class="cl">Start building sites â€¦
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                   <span class="p">|</span> EN <span class="p">|</span> FR <span class="p">|</span> FA
</span></span><span class="line"><span class="cl">-------------------+----+----+-----
</span></span><span class="line"><span class="cl">  Pages            <span class="p">|</span> <span class="m">15</span> <span class="p">|</span> <span class="m">10</span> <span class="p">|</span> <span class="m">10</span>
</span></span><span class="line"><span class="cl">  Paginator pages  <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Non-page files   <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Static files     <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Processed images <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">  Aliases          <span class="p">|</span>  <span class="m">3</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">1</span>
</span></span><span class="line"><span class="cl">  Sitemaps         <span class="p">|</span>  <span class="m">2</span> <span class="p">|</span>  <span class="m">1</span> <span class="p">|</span>  <span class="m">1</span>
</span></span><span class="line"><span class="cl">  Cleaned          <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span> <span class="p">|</span>  <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Total in <span class="m">155</span> ms
</span></span><span class="line"><span class="cl">Add commit message:
</span></span><span class="line"><span class="cl"><span class="o">[</span>main af4c483<span class="o">]</span> <span class="o">[</span>11:00 13-Jun-2021<span class="o">]</span> Site update
</span></span><span class="line"><span class="cl"> <span class="m">9</span> files changed, <span class="m">459</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">8</span> deletions<span class="o">(</span>-<span class="o">)</span>
</span></span><span class="line"><span class="cl"> create mode <span class="m">100644</span> post/second-post/index.html
</span></span><span class="line"><span class="cl">Enumerating objects: 27, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Counting objects: 100% <span class="o">(</span>27/27<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Delta compression using up to <span class="m">8</span> threads
</span></span><span class="line"><span class="cl">Compressing objects: 100% <span class="o">(</span>13/13<span class="o">)</span>, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Writing objects: 100% <span class="o">(</span>15/15<span class="o">)</span>, 3.54 KiB <span class="p">|</span> 1.77 MiB/s, <span class="k">done</span>.
</span></span><span class="line"><span class="cl">Total <span class="m">15</span> <span class="o">(</span>delta 9<span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta 0<span class="o">)</span>, pack-reused <span class="m">0</span>
</span></span><span class="line"><span class="cl">remote: Resolving deltas: 100% <span class="o">(</span>9/9<span class="o">)</span>, completed with <span class="m">7</span> <span class="nb">local</span> objects.
</span></span><span class="line"><span class="cl">To https://github.com/fahmifj/my-blog.git
</span></span><span class="line"><span class="cl">   f7141a3..af4c483  main -&gt; main
</span></span><span class="line"><span class="cl">Branch <span class="s1">&#39;main&#39;</span> <span class="nb">set</span> up to track remote branch <span class="s1">&#39;main&#39;</span> from <span class="s1">&#39;origin&#39;</span>.</span></span></code></pre>
</figure><p>And the repo should be updated.</p>
<p><div class="img-container"><img src="imgs/image-20210613110105343.png" alt="image-20210613110105343"  /></div>
</p>
<p>That&rsquo;s it!</p>
<p>This is how I deployed my site on my first try. However, this is an inefficient method because it wastes your bandwidth. Therefore, in the next post, let&rsquo;s employ GitHub action ðŸ˜¼.</p>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
