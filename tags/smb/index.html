<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>SMB | Ef's log</title>
<meta name=keywords content>
<meta name=description content="Infosec, CTF write-ups, and other IT related stuff">
<meta name=author content="Fahmi FJ">
<link rel=canonical href=https://fahmifj.github.io/tags/smb/>
<meta name=google-site-verification content="LlCRq--iL8r1HTz1DMbMvQyX2lZjWD-KnwFeO_OWlg8">
<link crossorigin=anonymous href=https://fahmifj.github.io/assets/css/stylesheet.min.02bc0805336e3c7ea840cc2ced497d94156aa067ce111789e158fde50b488d42.css integrity="sha256-ArwIBTNuPH6oQMws7Ul9lBVqoGfOEReJ4Vj95QtIjUI=" rel="preload stylesheet" as=style>
<link rel=preload href=https://fahmifj.github.io/resources/itsfj.png as=image>
<link rel=icon href=https://fahmifj.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://fahmifj.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://fahmifj.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://fahmifj.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://fahmifj.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.87.0">
<link rel=alternate type=application/rss+xml href=https://fahmifj.github.io/tags/smb/index.xml>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PDN0GP97D1"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-PDN0GP97D1',{anonymize_ip:!1})}</script>
<meta property="og:title" content="SMB">
<meta property="og:description" content="Infosec, CTF write-ups, and other IT related stuff">
<meta property="og:type" content="website">
<meta property="og:url" content="https://fahmifj.github.io/tags/smb/">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="SMB">
<meta name=twitter:description content="Infosec, CTF write-ups, and other IT related stuff">
</head>
<body class="list dark" id=top>
<script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
</noscript>
<header class="header sticky">
<nav class=nav>
<div class=menu-wrapper>
<div class=logo>
<a href=https://fahmifj.github.io/ accesskey=h title=友人F>友人F</a>
</span>
</div>
<ul id=menu onscroll=menu_on_scroll()>
<li>
<a href=https://fahmifj.github.io/about/ title=About>About</a>
</li>
<li>
<a href=https://fahmifj.github.io/archives/ title=Archives>Archives</a>
</li>
<li>
<a href=https://fahmifj.github.io/projects/ title=Projects>Projects</a>
</li>
<li>
<a href=https://fahmifj.github.io/search/ title="Search (Alt + /)" accesskey=/>Search</a>
</li>
</ul>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</nav>
</header>
<main class=main>
<header class=page-header>
<h1>SMB</h1>
</header>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Setup a Samba Server in Azure and Make It Accessible Over Internet</h2>
</header>
<section class=entry-content>
<p>
Last month, I was asked to setup a Samba/SMB server that is accessible over the Internet. Because it will only be used temporarily, I decided to use an Azure Virtual Machine (VM) instead of buying a dedicated VPS.
In this post, I’ll share my documentation on how to setup a Samba server in Azure.
Before proceeding further, I’ll state that:
Exposing an SMB Server directly to the Internet is not recommended, or not considered to be ‘best practice’.
...
</p>
</section>
<footer class=entry-footer>
July 4, 2021&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Fahmi J<div class=entry-tags>
<p>Azure&nbsp;·&nbsp;Samba&nbsp;·&nbsp;SMB&nbsp;·&nbsp;Linux&nbsp;·&nbsp;Tutorial </p>
</div>
</footer>
<a class=entry-link aria-label="post link to Setup a Samba Server in Azure and Make It Accessible Over Internet" href=https://fahmifj.github.io/blog/setup-a-samba-server-in-azure/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>HackTheBox - Blackfield</h2>
</header>
<section class=entry-content>
<p>
Blackfield is a hard difficulty Windows machine from HackTheBox that features Active Directory environment. It begins with collecting a list of usernames from an SMB share. With these usernames, I’m able to perform AS-REP roasting attack and obtain a TGT from a helpdesk account. The helpdesk account can be used to reset the password of an audit account. Re-enumerating SMB shares using the audit account finds an LSASS memory dump file.
...
</p>
</section>
<footer class=entry-footer>
May 4, 2021&nbsp;·&nbsp;11 min&nbsp;·&nbsp;Fahmi J<div class=entry-tags>
<p>OSCP-plus&nbsp;·&nbsp;Windows&nbsp;·&nbsp;Active-Directory&nbsp;·&nbsp;Domain-controller&nbsp;·&nbsp;SMB&nbsp;·&nbsp;ASREP-roasting&nbsp;·&nbsp;BloodHound&nbsp;·&nbsp;Bloodhound.py&nbsp;·&nbsp;Net-RPC&nbsp;·&nbsp;SeBackupPrivilege&nbsp;·&nbsp;DiskShadow&nbsp;·&nbsp;evil-winrm&nbsp;·&nbsp;secretsdump.py&nbsp;·&nbsp;ldapdomaindump </p>
</div>
</footer>
<a class=entry-link aria-label="post link to HackTheBox - Blackfield" href=https://fahmifj.github.io/writeups/hackthebox/htb-blackfield/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>HackTheBox - Cascade</h2>
</header>
<section class=entry-content>
<p>
Cascade is another fun Windows machine with Medium difficulty from HackTheBox created by VbScrub, the creator of Nest. It starts with by enumerating LDAP to find a custom LDAP attribute on one of the users to gain initial access to SMB shares. Enumeration on SMB discovers VNC credentials that can be decrypted using IRB. The credentials can be used to gain a foothold on the system. Another enumeration on SMB with those credentials finds a set of custom application.
...
</p>
</section>
<footer class=entry-footer>
April 23, 2021&nbsp;·&nbsp;12 min&nbsp;·&nbsp;Fahmi J<div class=entry-tags>
<p>OSCP-plus&nbsp;·&nbsp;Windows&nbsp;·&nbsp;Active-Directory&nbsp;·&nbsp;Domain-controller&nbsp;·&nbsp;SMB&nbsp;·&nbsp;rpcclient&nbsp;·&nbsp;VNC&nbsp;·&nbsp;dotNET&nbsp;·&nbsp;Csharp&nbsp;·&nbsp;dnSpy&nbsp;·&nbsp;Reverse-engineering&nbsp;·&nbsp;AD-Recycle-Bin&nbsp;·&nbsp;psexec.py&nbsp;·&nbsp;evil-winrm </p>
</div>
</footer>
<a class=entry-link aria-label="post link to HackTheBox - Cascade" href=https://fahmifj.github.io/writeups/hackthebox/htb-cascade/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>HackTheBox - Nest</h2>
</header>
<section class=entry-content>
<p>
Nest is one of my favorite machines after Forest, I learned a lot about enumeration here, especially for SMB.
Nest starts with anonymous access on SMB, which allows me to obtain credentials of a temporary user. The credentials can be leveraged to read the other shares and obtain an encrypted password that belongs to c.smith. There is a VB project inside a directory that can not be reached unless you visit its full path.
...
</p>
</section>
<footer class=entry-footer>
April 16, 2021&nbsp;·&nbsp;11 min&nbsp;·&nbsp;Fahmi J<div class=entry-tags>
<p>OSCP-plus&nbsp;·&nbsp;Windows&nbsp;·&nbsp;SMB&nbsp;·&nbsp;Alternate-Data-Stream&nbsp;·&nbsp;dotN&nbsp;·&nbsp;VB&nbsp;·&nbsp;Reverse-engineering&nbsp;·&nbsp;dnSpy&nbsp;·&nbsp;psexec.py </p>
</div>
</footer>
<a class=entry-link aria-label="post link to HackTheBox - Nest" href=https://fahmifj.github.io/writeups/hackthebox/htb-nest/></a>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://fahmifj.github.io/>友人F</a></span>
<span>&#183;</span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script></script>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>