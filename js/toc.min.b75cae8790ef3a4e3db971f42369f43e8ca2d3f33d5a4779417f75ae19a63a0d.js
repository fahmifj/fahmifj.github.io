(function(){function e(e){const t=document.querySelector(e);if(!t)return;t.addEventListener("click",e=>{const n=e.target.closest("a");if(!n||!t.contains(n))return;const s=n.parentElement,o=s.querySelector(":scope > ul");o&&(e.preventDefault(),s.classList.toggle("active"),o.style.display=s.classList.contains("active")?"block":"none")});const n=Array.from(document.querySelectorAll("h2[id], h3[id]"));if(!n.length)return;let i=null;function a(){t.querySelectorAll("a.active").forEach(e=>e.classList.remove("active")),t.querySelectorAll("li.active").forEach(e=>e.classList.remove("active"))}function r(e){let n=e.parentElement;for(;n&&n!==t;){if(n.tagName==="LI"){n.classList.add("active");const e=n.querySelector(":scope > ul");e&&(e.style.display="block")}n=n.parentElement.closest("li")}}let s=!1;function c(){s||(window.requestAnimationFrame(()=>{o(),s=!1}),s=!0)}function o(){const s=window.scrollY,o=150;let e=n[0].id;for(let t=0;t<n.length;t++){const i=n[t],a=i.getBoundingClientRect().top+s-o;if(s>=a)e=i.id;else break}if(e!==i){i=e;const n=t.querySelector(`a[href="#${e}"]`);if(!n)return;a(),n.classList.add("active"),r(n),n.scrollIntoView({block:"nearest",behavior:"smooth"}),t.querySelectorAll("li > ul").forEach(e=>{const t=e.parentElement;t.classList.contains("active")?e.style.display="block":e.style.display="none"})}}window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("load",o),o()}window.initTOC=e})()