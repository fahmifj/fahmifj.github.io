function initTOC(e){const t=document.querySelector(e);if(!t)return;t.addEventListener("click",e=>{const n=e.target.closest("a");if(!n||!t.contains(n))return;const s=n.parentElement,o=s.querySelector(":scope > ul");o&&(e.preventDefault(),s.classList.toggle("active"),o.style.display=s.classList.contains("active")?"block":"none")});const n=Array.from(document.querySelectorAll("h2[id], h3[id]"));if(!n.length)return;let s=null;function a(){t.querySelectorAll("a.active").forEach(e=>e.classList.remove("active")),t.querySelectorAll("li.active").forEach(e=>e.classList.remove("active"))}function r(e){let n=e.parentElement;for(;n&&n!==t;){if(n.tagName==="LI"){n.classList.add("active");const e=n.querySelector(":scope > ul");e&&(e.style.display="block")}n=n.parentElement.closest("li")}}let o=!1;function c(){o||(window.requestAnimationFrame(()=>{i(),o=!1}),o=!0)}function i(){const e=window.scrollY,i=120;let o=null;for(let t=0;t<n.length;t++){const s=n[t],a=s.getBoundingClientRect().top+e-i,r=a+s.offsetHeight;if(e>=a&&e<r){o=s.id;break}t===n.length-1&&e>=a&&(o=s.id)}const c=n[0].getBoundingClientRect().top+e-i;if(e<c){a(),s=null;return}if(o&&o!==s){s=o;const e=t.querySelector(`a[href="#${o}"]`);if(!e)return;a(),e.classList.add("active"),r(e),e.scrollIntoView({block:"nearest",behavior:"smooth"}),t.querySelectorAll("li > ul").forEach(e=>{const t=e.parentElement;e.style.display=t.classList.contains("active")?"block":"none"})}}window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("load",i),i()}