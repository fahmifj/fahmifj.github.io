!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).Swup=t()}(this,function(){const d=new WeakMap;function l(e,t,n,s){if(!e&&!d.has(t))return!1;const i=d.get(t)??new WeakMap;d.set(t,i);const o=i.get(n)??new Set;i.set(n,o);const a=o.has(s);return e?o.add(s):o.delete(s),a&&e}const p=(e,t)=>String(e).toLowerCase().replace(/[\s/_.]+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")||t||"",s=function(e){let{hash:t}=void 0===e?{}:e;return window.location.pathname+window.location.search+(t?window.location.hash:"")},o=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),e=e||s({hash:!0});const n={...window.history.state||{},url:e,random:Math.random(),source:"swup",...t};window.history.replaceState(n,"",e)},E=(e,t,n,s)=>{const o=new AbortController;return function(e,t,n,s={}){const{signal:r,base:i=document}=s;if(r?.aborted)return;const{once:u,...c}=s,o=i instanceof Document?i.documentElement:i,h=Boolean("object"==typeof s?s.capture:s),d=s=>{const i=function(e,t){let n=e.target;if(n instanceof Text&&(n=n.parentElement),n instanceof Element&&e.currentTarget instanceof Element){const s=n.closest(t);if(s&&e.currentTarget.contains(s))return s}}(s,String(e));if(i){const e=Object.assign(s,{delegateTarget:i});n.call(o,e),u&&(o.removeEventListener(t,d,c),l(!1,o,n,a))}},a=JSON.stringify({selector:e,type:t,capture:h});l(!0,o,n,a)||o.addEventListener(t,d,c),r?.addEventListener("abort",()=>{l(!1,o,n,a)})}(e,t,n,s={...s,signal:o.signal}),{destroy:()=>o.abort()}};class t extends URL{constructor(e,n){void 0===n&&(n=document.baseURI),super(e.toString(),n),Object.setPrototypeOf(this,t.prototype)}get url(){return this.pathname+this.search}static fromElement(e){const n=e.getAttribute("href")||e.getAttribute("xlink:href")||"";return new t(n)}static fromUrl(e){return new t(e)}}const k=function(e,n){void 0===n&&(n={});try{const o=this;function s(){const{status:l,url:c}=r;return Promise.resolve(r.text()).then(function(s){if(500===l)throw o.hooks.call("fetch:error",a,{status:l,response:r,url:c}),new i(`Server error: ${c}`,{status:l,url:c});if(!s)throw new i(`Empty response: ${c}`,{status:l,url:c});const{url:u}=t.fromUrl(c),d={url:u,html:s};return!a.cache.write||n.method&&"GET"!==n.method||e!==u||o.cache.set(d.url,d),d})}e=t.fromUrl(e).url;const{visit:a=o.visit}=n,f={...o.options.requestHeaders,...n.headers},c=n.timeout??o.options.timeout,h=new AbortController,{signal:m}=h;n={...n,headers:f,signal:m};let r,l=!1,d=null;c&&c>0&&(d=setTimeout(()=>{l=!0,h.abort("timeout")},c));const u=function(t,s){try{var i=Promise.resolve(o.hooks.call("fetch:request",a,{url:e,options:n},(e,t)=>{let{url:n,options:s}=t;return fetch(n,s)})).then(function(e){r=e,d&&clearTimeout(d)})}catch(e){return s(e)}return i&&i.then?i.then(void 0,s):i}(0,function(t){throw l?(o.hooks.call("fetch:timeout",a,{url:e}),new i(`Request timed out: ${e}`,{url:e,timedOut:l})):"AbortError"===t?.name||m.aborted?new i(`Request aborted: ${e}`,{url:e,aborted:!0}):t});return Promise.resolve(u&&u.then?u.then(s):s())}catch(e){return Promise.reject(e)}};class i extends Error{constructor(e,t){super(e),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name="FetchError",this.url=t.url,this.status=t.status,this.aborted=t.aborted||!1,this.timedOut=t.timedOut||!1}}class A{constructor(e){this.swup=void 0,this.pages=new Map,this.swup=e}get size(){return this.pages.size}get all(){const e=new Map;return this.pages.forEach((t,n)=>{e.set(n,{...t})}),e}has(e){return this.pages.has(this.resolve(e))}get(e){const t=this.pages.get(this.resolve(e));return t&&{...t}}set(e,t){e=this.resolve(e),t={...t,url:e},this.pages.set(e,t),this.swup.hooks.callSync("cache:set",void 0,{page:t})}update(e,t){e=this.resolve(e);const n={...this.get(e),...t,url:e};this.pages.set(e,n)}delete(e){this.pages.delete(this.resolve(e))}clear(){this.pages.clear(),this.swup.hooks.callSync("cache:clear",void 0,void 0)}prune(e){this.pages.forEach((t,n)=>{e(n,t)&&this.delete(n)})}resolve(e){const{url:n}=t.fromUrl(e);return this.swup.resolveUrl(n)}}const c=function(e,t){return void 0===t&&(t=document),t.querySelector(e)},u=function(e,t){return void 0===t&&(t=document),Array.from(t.querySelectorAll(e))},y=()=>new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e()})})});function j(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}function f(e,t){const n=e?.closest(`[${t}]`);return n?.hasAttribute(t)?n?.getAttribute(t)||!0:void 0}class S{constructor(e){this.swup=void 0,this.swupClasses=["to-","is-changing","is-rendering","is-popstate","is-animating","is-leaving"],this.swup=e}get selectors(){const{scope:e}=this.swup.visit.animation;return"containers"===e?this.swup.visit.containers:"html"===e?["html"]:Array.isArray(e)?e:[]}get selector(){return this.selectors.join(",")}get targets(){return this.selector.trim()?u(this.selector):[]}add(){this.targets.forEach(e=>e.classList.add(...[].slice.call(arguments)))}remove(){this.targets.forEach(e=>e.classList.remove(...[].slice.call(arguments)))}clear(){this.targets.forEach(e=>{const t=e.className.split(" ").filter(e=>this.isSwupClass(e));e.classList.remove(...t)})}isSwupClass(e){return this.swupClasses.some(t=>e.startsWith(t))}}class g{constructor(e,t){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0,this.meta=void 0;const{to:n,from:s,hash:o,el:i,event:a}=t;this.id=Math.random(),this.state=1,this.from={url:s??e.location.url,hash:e.location.hash},this.to={url:n,hash:o},this.containers=e.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:e.options.native,scope:e.options.animationScope,selector:e.options.animationSelector},this.trigger={el:i,event:a},this.cache={read:e.options.cache,write:e.options.cache},this.history={action:"push",popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0},this.meta={}}advance(e){this.state<e&&(this.state=e)}abort(){this.state=8}get done(){return this.state>=7}}function w(e){return new g(this,e)}const b="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function e(t,s,o){if(!t.s){if(o instanceof n){if(!o.s)return void(o.o=e.bind(null,t,s));1&s&&(s=o.s),o=o.v}if(o&&o.then)return void o.then(e.bind(null,t,s),e.bind(null,t,2));t.s=s,t.v=o;const i=t.o;i&&i(t)}}const n=function(){function t(){}return t.prototype.then=function(n,s){const o=new t,i=this.s;if(i){const t=1&i?n:s;if(t){try{e(o,1,t(this.v))}catch(t){e(o,2,t)}return o}return this}return this.o=function(t){try{const i=t.v;1&t.s?e(o,1,n?n(i):i):s?e(o,1,s(i)):e(o,2,i)}catch(t){e(o,2,t)}},o},t}();function _(e){return e instanceof n&&1&e.s}class C{constructor(e){this.swup=void 0,this.registry=new Map,this.hooks=["animation:out:start","animation:out:await","animation:out:end","animation:in:start","animation:in:await","animation:in:end","animation:skip","cache:clear","cache:set","content:replace","content:scroll","enable","disable","fetch:request","fetch:error","fetch:timeout","history:popstate","link:click","link:self","link:anchor","link:newtab","page:load","page:view","scroll:top","scroll:anchor","visit:start","visit:transition","visit:abort","visit:end"],this.swup=e,this.init()}init(){this.hooks.forEach(e=>this.create(e))}create(e){this.registry.has(e)||this.registry.set(e,new Map)}exists(e){return this.registry.has(e)}get(e){const t=this.registry.get(e);if(t)return t;console.error(`Unknown hook '${e}'`)}clear(){this.registry.forEach(e=>e.clear())}on(e,t,n){void 0===n&&(n={});const s=this.get(e);if(!s)return console.warn(`Hook '${e}' not found.`),()=>{};const o=s.size+1,i={...n,id:o,hook:e,handler:t};return s.set(t,i),()=>this.off(e,t)}before(e,t,n){return void 0===n&&(n={}),this.on(e,t,{...n,before:!0})}replace(e,t,n){return void 0===n&&(n={}),this.on(e,t,{...n,replace:!0})}once(e,t,n){return void 0===n&&(n={}),this.on(e,t,{...n,once:!0})}off(e,t){const n=this.get(e);n&&t?n.delete(t)||console.warn(`Handler for hook '${e}' not found.`):n&&n.clear()}call(e,t,n,s){try{const o=this,[i,a,r]=o.parseCallArgs(e,t,n,s),{before:c,handler:l,after:d}=o.getHandlers(e,r);return Promise.resolve(o.run(c,i,a)).then(function(){return Promise.resolve(o.run(l,i,a,!0)).then(function(t){let[n]=t;return Promise.resolve(o.run(d,i,a)).then(function(){return o.dispatchDomEvent(e,i,a),n})})})}catch(e){return Promise.reject(e)}}callSync(e,t,n,s){const[o,i,a]=this.parseCallArgs(e,t,n,s),{before:r,handler:c,after:l}=this.getHandlers(e,a);this.runSync(r,o,i);const[d]=this.runSync(c,o,i,!0);return this.runSync(l,o,i),this.dispatchDomEvent(e,o,i),d}parseCallArgs(e,t,n,s){return t instanceof g||"object"!=typeof t&&"function"!=typeof n?[t,n,s]:[void 0,t,n]}run(t,s,o,i){void 0===i&&(i=!1);try{let r;const l=this;void 0===s&&(s=l.swup.visit);const c=[],a=function(t,s,o){if("function"==typeof t[b]){if(a=t[b](),function t(r){try{for(;!((c=a.next()).done||o&&o());)if((r=s(c.value))&&r.then){if(!_(r))return void r.then(t,u||(u=e.bind(null,i=new n,2)));r=r.v}i?e(i,1,r):i=r}catch(t){e(i||(i=new n),2,t)}}(),a.return){if(r=function(e){try{c.done||a.return()}catch{}return e},i&&i.then)return i.then(r,function(e){throw r(e)});r()}return i}if(!("length"in t))throw new TypeError("Object is not iterable");for(var i,a,r,c,u,l=[],d=0;d<t.length;d++)l.push(t[d]);return function(t,s,o){var i,a,r=-1;return function c(l){try{for(;++r<t.length&&(!o||!o());)if((l=s(r))&&l.then){if(!_(l))return void l.then(c,a||(a=e.bind(null,i=new n,2)));l=l.v}i?e(i,1,l):i=l}catch(t){e(i||(i=new n),2,t)}}(),i}(l,function(e){return s(l[e])},o)}(t,function(e){let{hook:t,handler:n,defaultHandler:a,once:r}=e;if(!s?.done)return r&&l.off(t,n),function(e,t){try{var i=Promise.resolve(function(e,t){return void 0===t&&(t=[]),new Promise((n,s)=>{const o=e(...t);j(o)?o.then(n,s):n(o)})}(n,[s,o,a])).then(function(e){c.push(e)})}catch(e){return t(e)}return i&&i.then?i.then(void 0,t):i}(0,function(e){if(i)throw e;console.error(`Error in hook '${t}':`,e)})},function(){return r});return Promise.resolve(a&&a.then?a.then(function(e){return r?e:c}):r?a:c)}catch(e){return Promise.reject(e)}}runSync(e,t,n,s){void 0===t&&(t=this.swup.visit),void 0===s&&(s=!1);const o=[];for(const{hook:i,handler:a,defaultHandler:r,once:c}of e)if(!t?.done){c&&this.off(i,a);try{const e=a(t,n,r);o.push(e),j(e)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${i}'.`)}catch(e){if(s)throw e;console.error(`Error in hook '${i}':`,e)}}return o}getHandlers(e,t){const a=this.get(e);if(!a)return{found:!1,before:[],handler:[],after:[],replaced:!1};const s=Array.from(a.values()),o=this.sortRegistrations,c=s.filter(e=>{let{before:t,replace:n}=e;return t&&!n}).sort(o),n=s.filter(e=>{let{replace:t}=e;return t}).filter(e=>!0).sort(o),l=s.filter(e=>{let{before:t,replace:n}=e;return!t&&!n}).sort(o),r=n.length>0;let i=[];if(t&&(i=[{id:0,hook:e,handler:t}],r)){const s=n.length-1,{handler:a,once:r}=n[s],o=e=>{const s=n[e-1];return s?(t,n)=>s.handler(t,n,o(e-1)):t};i=[{id:0,hook:e,once:r,handler:a,defaultHandler:o(s)}]}return{found:!0,before:c,handler:i,after:l,replaced:r}}sortRegistrations(e,t){return(e.priority??0)-(t.priority??0)||e.id-t.id||0}dispatchDomEvent(e,t,n){if(t?.done)return;const s={hook:e,args:n,visit:t||this.swup.visit};document.dispatchEvent(new CustomEvent("swup:any",{detail:s,bubbles:!0})),document.dispatchEvent(new CustomEvent(`swup:${e}`,{detail:s,bubbles:!0}))}parseName(e){const[t,...n]=e.split(".");return[t,n.reduce((e,t)=>({...e,[t]:!0}),{})]}}const z=e=>{if(e&&"#"===e.charAt(0)&&(e=e.substring(1)),!e)return null;const n=decodeURIComponent(e);let t=document.getElementById(e)||document.getElementById(n)||c(`a[name='${CSS.escape(e)}']`)||c(`a[name='${CSS.escape(n)}']`);return t||"top"!==e||(t=document.body),t},x=function(e){let{selector:t,elements:n}=e;try{if(!1===t&&!n)return Promise.resolve();let e=[];if(n)e=Array.from(n);else if(t&&(e=u(t,document.body),!e.length))return console.warn(`[swup] No elements found matching animationSelector \`${t}\``),Promise.resolve();const s=e.map(e=>function(e){const{type:t,timeout:n,propCount:s}=function(e){const t=window.getComputedStyle(e),d=a(t,`${r}Delay`),s=a(t,`${r}Duration`),o=v(d,s),u=a(t,`${h}Delay`),i=a(t,`${h}Duration`),c=v(u,i),l=Math.max(o,c),n=l>0?o>c?r:h:null;return{type:n,timeout:l,propCount:n?n===r?s.length:i.length:0}}(e);return!!t&&!!n&&new Promise(o=>{const i=`${t}end`,l=performance.now();let a=0;const r=()=>{e.removeEventListener(i,c),o()},c=t=>{t.target===e&&((performance.now()-l)/1e3<t.elapsedTime||++a>=s&&r())};setTimeout(()=>{a<s&&r()},n+1),e.addEventListener(i,c)})}(e));return s.filter(Boolean).length>0?Promise.resolve(Promise.all(s)).then(function(){}):(t&&console.warn(`[swup] No CSS animation duration defined on elements matching \`${t}\``),Promise.resolve())}catch(e){return Promise.reject(e)}},r="transition",h="animation";function a(e,t){return(e[t]||"").split(", ")}function v(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((t,n)=>m(t)+m(e[n])))}function m(e){return 1e3*parseFloat(e)}const M=function(e,n){void 0===n&&(n={});try{let c;const a=this;function i(i){if(c)return i;a.navigating=!0,a.visit=e;const{el:l}=e.trigger;n.referrer=n.referrer||a.location.url,!1===n.animate&&(e.animation.animate=!1),e.animation.animate||a.classes.clear();const r=n.history||f(l,"data-swup-history");"string"==typeof r&&["push","replace"].includes(r)&&(e.history.action=r);const d=n.animation||f(l,"data-swup-animation");return"string"==typeof d&&(e.animation.name=d),e.meta=n.meta||{},"object"==typeof n.cache?(e.cache.read=n.cache.read??e.cache.read,e.cache.write=n.cache.write??e.cache.write):void 0!==n.cache&&(e.cache={read:!!n.cache,write:!!n.cache}),delete n.cache,function(i,r){try{var c=function(i,r){try{var c=Promise.resolve(a.hooks.call("visit:start",e,void 0)).then(function(){function l(){if(!e.done)return Promise.resolve(a.hooks.call("visit:transition",e,void 0,function(){try{let s;function t(t){return s?t:(e.advance(4),Promise.resolve(a.animatePageOut(e)).then(function(){function n(){return Promise.resolve(a.animatePageIn(e)).then(function(){})}const t=function(){if(e.animation.native&&document.startViewTransition)return Promise.resolve(document.startViewTransition(function(){try{const t=a.renderPage;return Promise.resolve(i).then(function(n){return Promise.resolve(t.call(a,e,n))})}catch(e){return Promise.reject(e)}}).finished).then(function(){});{const t=a.renderPage;return Promise.resolve(i).then(function(n){return Promise.resolve(t.call(a,e,n)).then(function(){})})}}();return t&&t.then?t.then(n):n()}))}const n=function(){if(!e.animation.animate)return Promise.resolve(a.hooks.call("animation:skip",void 0)).then(function(){const t=a.renderPage;return Promise.resolve(i).then(function(n){return Promise.resolve(t.call(a,e,n)).then(function(){s=1})})})}();return Promise.resolve(n&&n.then?n.then(t):t(n))}catch(e){return Promise.reject(e)}})).then(function(){if(!e.done)return Promise.resolve(a.hooks.call("visit:end",e,void 0,()=>a.classes.clear())).then(function(){e.state=7,a.navigating=!1,a.onVisitEnd&&(a.onVisitEnd(),a.onVisitEnd=void 0)})})}e.state=3;const i=a.hooks.call("page:load",e,{options:n},function(e,t){try{function n(e){return t.page=e,t.cache=!!s,t.page}let s;return e.cache.read&&(s=a.cache.get(e.to.url)),Promise.resolve(s?n(s):Promise.resolve(a.fetchPage(e.to.url,t.options)).then(n))}catch(e){return Promise.reject(e)}});i.then(t=>{let{html:n}=t;e.advance(5),e.to.html=n,e.to.document=(new DOMParser).parseFromString(n,"text/html")});const r=e.to.url+e.to.hash;e.history.popstate||("replace"===e.history.action||e.to.url===a.location.url?o(r):(a.currentHistoryIndex++,function(e,t){void 0===t&&(t={});const n={url:e=e||s({hash:!0}),random:Math.random(),source:"swup",...t};window.history.pushState(n,"",e)}(r,{index:a.currentHistoryIndex}))),a.location=t.fromUrl(r),e.history.popstate&&a.classes.add("is-popstate"),e.animation.name&&a.classes.add(`to-${p(e.animation.name)}`);const c=function(){if(e.animation.wait)return Promise.resolve(i).then(function(){})}();return c&&c.then?c.then(l):l()})}catch(e){return r(e)}return c&&c.then?c.then(void 0,r):c}(0,function(t){t&&!t?.aborted?(e.state=9,console.error(t),a.options.skipPopStateHandling=()=>(window.location.assign(e.to.url+e.to.hash),!0),window.history.back()):e.state=8})}catch(e){return r(!0,e)}return c&&c.then?c.then(r.bind(null,!1),r.bind(null,!0)):r(!1,c)}(0,function(t,n){if(delete e.to.document,t)throw n;return n})}const r=function(){if(a.navigating)return function(){if(!(a.visit.state>=6))return Promise.resolve(a.hooks.call("visit:abort",a.visit,void 0)).then(function(){delete a.visit.to.document,a.visit.state=8});e.state=2,a.onVisitEnd=()=>a.performNavigation(e,n),c=1}()}();return Promise.resolve(r&&r.then?r.then(i):i(r))}catch(e){return Promise.reject(e)}};function F(e,n,s){if(void 0===n&&(n={}),void 0===s&&(s={}),"string"!=typeof e)throw new Error("swup.navigate() requires a URL parameter");if(this.shouldIgnoreVisit(e,{el:s.el,event:s.event}))return void window.location.assign(e);const{url:o,hash:i}=t.fromUrl(e),a=this.createVisit({...s,to:o,hash:i});this.performNavigation(a,n)}const T=function(e){try{const t=this;return Promise.resolve(t.hooks.call("animation:out:start",e,void 0,()=>{t.classes.add("is-changing","is-animating","is-leaving")})).then(function(){return Promise.resolve(t.hooks.call("animation:out:await",e,{skip:!1},(e,n)=>{let{skip:s}=n;if(!s)return t.awaitAnimations({selector:e.animation.selector})})).then(function(){return Promise.resolve(t.hooks.call("animation:out:end",e,void 0)).then(function(){})})})}catch(e){return Promise.reject(e)}},O=function(e){const t=e.to.document;if(!t)return!1;const n=t.querySelector("title")?.innerText||"";document.title=n;const s=u('[data-swup-persist]:not([data-swup-persist=""])'),o=e.containers.map(e=>{const n=document.querySelector(e),s=t.querySelector(e);return n&&s?(n.replaceWith(s.cloneNode(!0)),!0):(n||console.warn(`[swup] Container missing in current document: ${e}`),s||console.warn(`[swup] Container missing in incoming document: ${e}`),!1)}).filter(Boolean);return s.forEach(e=>{const n=e.getAttribute("data-swup-persist"),t=c(`[data-swup-persist="${n}"]`);t&&t!==e&&t.replaceWith(e)}),o.length===e.containers.length},D=function(e){const n={behavior:"auto"},{target:o,reset:i}=e.scroll,s=o??e.to.hash;let t=!1;return s&&(t=this.hooks.callSync("scroll:anchor",e,{hash:s,options:n},(e,t)=>{let{hash:s,options:o}=t;const n=this.getAnchorElement(s);return n&&n.scrollIntoView(o),!!n})),i&&!t&&(t=this.hooks.callSync("scroll:top",e,{options:n},(e,t)=>{let{options:n}=t;return window.scrollTo({top:0,left:0,...n}),!0})),t},N=function(e){try{const t=this;if(e.done)return Promise.resolve();const n=t.hooks.call("animation:in:await",e,{skip:!1},(e,n)=>{let{skip:s}=n;if(!s)return t.awaitAnimations({selector:e.animation.selector})});return Promise.resolve(y()).then(function(){return Promise.resolve(t.hooks.call("animation:in:start",e,void 0,()=>{t.classes.remove("is-animating")})).then(function(){return Promise.resolve(n).then(function(){return Promise.resolve(t.hooks.call("animation:in:end",e,void 0)).then(function(){})})})})}catch(e){return Promise.reject(e)}},L=function(e,n){try{const i=this;if(e.done)return Promise.resolve();e.advance(6);const{url:a}=n;return i.isSameResolvedUrl(s(),a)||(o(a),i.location=t.fromUrl(a),e.to.url=i.location.url,e.to.hash=i.location.hash),Promise.resolve(i.hooks.call("content:replace",e,{page:n},(e)=>{if(i.classes.remove("is-leaving"),e.animation.animate&&i.classes.add("is-rendering"),!i.replaceContent(e))throw new Error("[swup] Container mismatch, aborting");e.animation.animate&&(i.classes.add("is-changing","is-animating","is-rendering"),e.animation.name&&i.classes.add(`to-${p(e.animation.name)}`))})).then(function(){return Promise.resolve(i.hooks.call("content:scroll",e,void 0,()=>i.scrollToContent(e))).then(function(){return Promise.resolve(i.hooks.call("page:view",e,{url:i.location.url,title:document.title})).then(function(){})})})}catch(e){return Promise.reject(e)}},R=function(e){var t;if(t=e,Boolean(t?.isSwupPlugin)){if(e.swup=this,!e._checkRequirements||e._checkRequirements())return e._beforeMount&&e._beforeMount(),e.mount(),this.plugins.push(e),this.plugins}else console.error("Not a swup plugin instance",e)};function P(e){const t=this.findPlugin(e);if(t)return t.unmount(),t._afterUnmount&&t._afterUnmount(),this.plugins=this.plugins.filter(e=>e!==t),this.plugins;console.error("No such plugin",t)}function H(e){return this.plugins.find(t=>t===e||t.name===e||t.name===`Swup${String(e)}`)}function I(e){if("function"!=typeof this.options.resolveUrl)return console.warn("[swup] options.resolveUrl expects a callback function."),e;const t=this.options.resolveUrl(e);return t&&"string"==typeof t?t.startsWith("//")||t.startsWith("http")?(console.warn("[swup] options.resolveUrl needs to return a relative url"),e):t:(console.warn("[swup] options.resolveUrl needs to return a url"),e)}function B(e,t){return this.resolveUrl(e)===this.resolveUrl(t)}const V={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',animationScope:"html",cache:!0,containers:["#swup"],hooks:{},ignoreVisit:function(e,t){let{el:n}=void 0===t?{}:t;return!!n?.closest("[data-no-swup]")},linkSelector:"a[href]",linkToSelf:"scroll",native:!1,plugins:[],resolveUrl:e=>e,requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},skipPopStateHandling:e=>"swup"!==e.state?.source,timeout:0};return class{get currentPageUrl(){return this.location.url}constructor(e){void 0===e&&(e={}),this.version="4.8.2",this.options=void 0,this.defaults=V,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.location=t.fromUrl(window.location.href),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=R,this.unuse=P,this.findPlugin=H,this.log=()=>{},this.navigate=F,this.performNavigation=M,this.createVisit=w,this.delegateEvent=E,this.fetchPage=k,this.awaitAnimations=x,this.renderPage=L,this.replaceContent=O,this.animatePageIn=N,this.animatePageOut=T,this.scrollToContent=D,this.getAnchorElement=z,this.getCurrentUrl=s,this.resolveUrl=I,this.isSameResolvedUrl=B,this.options={...this.defaults,...e},this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new A(this),this.classes=new S(this),this.hooks=new C(this),this.visit=this.createVisit({to:""}),this.currentHistoryIndex=window.history.state?.index??1,this.enable()}enable(){try{const e=this,{linkSelector:t}=e.options;e.clickDelegate=e.delegateEvent(t,"click",e.handleLinkClick),window.addEventListener("popstate",e.handlePopState),e.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),e.options.native=e.options.native&&!!document.startViewTransition,e.options.plugins.forEach(t=>e.use(t));for(const[t,n]of Object.entries(e.options.hooks)){const[s,o]=e.hooks.parseName(t);e.hooks.on(s,n,o)}return"swup"!==window.history.state?.source&&o(null,{index:e.currentHistoryIndex}),Promise.resolve(y()).then(function(){return Promise.resolve(e.hooks.call("enable",void 0,void 0,()=>{const t=document.documentElement;t.classList.add("swup-enabled"),t.classList.toggle("swup-native",e.options.native)})).then(function(){})})}catch(e){return Promise.reject(e)}}destroy(){try{const e=this;return e.clickDelegate.destroy(),window.removeEventListener("popstate",e.handlePopState),e.cache.clear(),e.options.plugins.forEach(t=>e.unuse(t)),Promise.resolve(e.hooks.call("disable",void 0,void 0,()=>{const e=document.documentElement;e.classList.remove("swup-enabled"),e.classList.remove("swup-native")})).then(function(){e.hooks.clear()})}catch(e){return Promise.reject(e)}}shouldIgnoreVisit(e,n){let{el:s,event:o}=void 0===n?{}:n;const{origin:i,url:a,hash:r}=t.fromUrl(e);return i!==window.location.origin||!!s&&!!this.triggerWillOpenNewWindow(s)||!!this.options.ignoreVisit(a+r,{el:s,event:o})}handleLinkClick(e){const i=e.delegateTarget,{href:r,url:s,hash:a}=t.fromElement(i);if(this.shouldIgnoreVisit(r,{el:i,event:e}))return;if(this.navigating&&s===this.visit.to.url)return void e.preventDefault();const n=this.createVisit({to:s,hash:a,el:i,event:e});e.metaKey||e.ctrlKey||e.shiftKey||e.altKey?this.hooks.callSync("link:newtab",n,{href:r}):0===e.button&&this.hooks.callSync("link:click",n,{el:i,event:e},()=>{const t=n.from.url??"";e.preventDefault(),s&&s!==t?this.isSameResolvedUrl(s,t)||this.performNavigation(n):a?this.hooks.callSync("link:anchor",n,{hash:a},()=>{o(s+a),this.scrollToContent(n)}):this.hooks.callSync("link:self",n,void 0,()=>{"navigate"===this.options.linkToSelf?this.performNavigation(n):(o(s),this.scrollToContent(n))})})}handlePopState(e){const i=e.state?.url??window.location.href;if(this.options.skipPopStateHandling(e))return;if(this.isSameResolvedUrl(s(),this.location.url))return;const{url:a,hash:r}=t.fromUrl(i),n=this.createVisit({to:a,hash:r,event:e});n.history.popstate=!0;const o=e.state?.index??0;o&&o!==this.currentHistoryIndex&&(n.history.direction=o-this.currentHistoryIndex>0?"forwards":"backwards",this.currentHistoryIndex=o),n.animation.animate=!1,n.scroll.reset=!1,n.scroll.target=!1,this.options.animateHistoryBrowsing&&(n.animation.animate=!0,n.scroll.reset=!0),this.hooks.callSync("history:popstate",n,{event:e},()=>{this.performNavigation(n)})}triggerWillOpenNewWindow(e){return!!e.matches('[download], [target="_blank"]')}}})