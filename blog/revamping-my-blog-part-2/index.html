<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="index, follow"><title>Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo | Ef's log</title><meta name=keywords content="swup,spa,hugo,SSG to SSR"><meta name=description content="Part kedua revamp PaperMod"><meta name=author content="Fahmi FJ"><link rel=canonical href=https://fahmifj.github.io/blog/revamping-my-blog-part-2/><meta name=google-site-verification content="LlCRq--iL8r1HTz1DMbMvQyX2lZjWD-KnwFeO_OWlg8"><link crossorigin=anonymous href=https://fahmifj.github.io/assets/css/stylesheet.min.107d631a6a669b15878522207625eefa4504084de77c257c5560515bb2230ced.css integrity="sha256-EH1jGmpmmxWHhSIgdiXu+kUECE3nfCV8VWBRW7IjDO0=" rel="preload stylesheet" as=style><link crossorigin=anonymous rel=preload as=fetch href=https://fahmifj.github.io/index.json><script defer crossorigin=anonymous src=https://fahmifj.github.io/assets/js/search.min.967afd8d8f038af94fb217085d9b4fb4bd6581d04a3ae6d9a1015740211d0923.js integrity="sha256-lnr9jY8DivlPshcIXZtPtL1lgdBKOubZoQFXQCEdCSM="></script>
<script defer crossorigin=anonymous src=https://fahmifj.github.io/assets/js/highlight.min.22059b46810f6ad868c7821e09643fcd3324a7aece939a3b9d810ddf8cc89e0d.js integrity="sha256-IgWbRoEPathox4IeCWQ/zTMkp67Ok5o7nYEN34zIng0="></script>
<link rel=icon href=https://fahmifj.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://fahmifj.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://fahmifj.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://fahmifj.github.io/apple-touch-icon.png><link rel=mask-icon href=https://fahmifj.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.111.2"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-PDN0GP97D1"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PDN0GP97D1",{anonymize_ip:!1})}</script><meta property="og:title" content="Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo"><meta property="og:description" content="Part kedua revamp PaperMod"><meta property="og:type" content="article"><meta property="og:url" content="https://fahmifj.github.io/blog/revamping-my-blog-part-2/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-11-30T22:37:50+07:00"><meta property="article:modified_time" content="2025-11-30T22:37:50+07:00"><meta property="og:see_also" content="https://fahmifj.github.io/blog/revamping-my-blog-part-1/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo"><meta name=twitter:description content="Part kedua revamp PaperMod"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://fahmifj.github.io/blog/"},{"@type":"ListItem","position":2,"name":"Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo","item":"https://fahmifj.github.io/blog/revamping-my-blog-part-2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo","name":"Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo","description":"Part kedua revamp PaperMod","keywords":["swup","spa","hugo","SSG to SSR"],"articleBody":"Menjelang akhir tahun, gue mulai lanjutin lagi proses revamp blog ini. Dari catatan pribadi, revamp ini udah masuk yang ke-9, tapi disini gue rangkum aja bagian majornya biar lebih gampang. Jadi gue anggap ini revamp kedua.\nDi revamp yang pertama, gue banyak otak-atik di bagian UI, nah di revamp kedua ini, gue lebih condong ke UXnya, khususnya untuk bagian navigasi.\nSearch in Navbar Di PaperMod (tema bawaan), fitur pencariannya ini berupa sebuah halaman khusus. Jadi ketika user mau cari sesuatu di blog gue, dia harus mengklik menu “Search” yang mengarah ke halaman khusus berisi search box. Di situlah tempat user melakukan pencariannya.\nMenurut gue hal cara tersebut kurang praktis dan efisien. Jadi, untuk mempermudah navigasi pencarian, gue pindahkan search box tersebut ke bagian Navbar.\nImplementasi Caranya gampang, code html terkait search box tinggal di copy-paste ke dalam layout/partials/header.html:\nheader.html ...[SNIP]... \u003cdiv id=\"searchBox\"\u003e \u003cinput class=\"searchInput\" id=\"searchInput\" aria-label=\"search\" type=\"search\" placeholder=\"Search...\"\u003e \u003cdiv class=\"searchResults-container \"\u003e \u003cspan class=\"search-results hidden\" id=\"searchResults\" aria-label=\"search results\" \u003e\u003c/span\u003e \u003c/div\u003e \u003c/div\u003e ...[SNIP]... Fitur search PaperMod ini mengandalkan Fuse dimana index searchnya hanya di-fetch dan dimuat ketika kita berada di halaman search tadi. Artinya, kalau search box gue pindah ke navbar, search-nya nggak akan jalan kecuali indexnya dimuat di setiap halaman.\nUntuk hal ini cukup simple, gue cuma perlu hapus kondisional if berikut yang ada di dalam layout/partials/head.html:\nhead.html ... {{- /* Search */}} {{/* Load search in every page */}} {{- /*if (eq .Layout `search`) */ -}} \u003clink crossorigin=\"anonymous\" rel=\"preload\" as=\"fetch\" href=\"{{- .Site.BaseURL -}}index.json\"\u003e ... \u003cscript defer crossorigin=\"anonymous\" src=\"{{ $search.RelPermalink }}\"\u003e\u003c/script\u003e {{- end }} {{- /* end */ -}} ... Touch up: Add blur effect Terinspirasi dari tema LoveIt, gue tambahin juga efek blur ketika user sedang fokus ke pencarian.\nImplementasinya ini gampang. Pada file /layouts/_default/baseof.html, tepat setelah tag , gue tambah sebuah elemen div dengan ID mask yang berfungsi sebagai masking.\nbaseof.html ... Lalu untuk CSSnya gue tambahkan properti berikut.\ncustom.css ... #mask { background-repeat: no-repeat; background-position: center; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-color: rgba(0, 0, 0, 0); } body.blur \u003e :not(.header) { -webkit-filter: blur(4px); -moz-filter: blur(4px); -ms-filter: blur(4px); -o-filter: blur(4px); filter: blur(4px); } ... Untuk behavior atau logicnya sih simple:\nTambahkan efek blur ke element dan buat elemen masking menjadi paling atas dari semua elemen yang ada ketika user melakukan klik pada search box. Hapus efek blur ketika user melakukan klik pada item pencarian atau pada masking elemen Kalo di Javascriptnya seperti berikut.\nfastsearch.js ... const mask = document.getElementById(\"mask\") const pageBody = document.body; function bgBlur() { pageBody.classList.add(\"blur\"); mask.style.zIndex = \"99\"; // z-index shouldn't be higher than the navbar/header mask.style.backgroundColor = \"rgba(0,0,0,0.25)\"; } function bgUnblur() { pageBody.classList.remove(\"blur\"); mask.style.zIndex = \"-1\"; mask.style.backgroundColor = \"rgba(0,0,0,0)\"; } function reset() { ...[SNIP]... bgUnblur(); } searchInput.addEventListener(\"click\", bgBlur); mask.addEventListener(\"click\", reset); document.addEventListener(\"click\", (e) =\u003e { const item = e.target.closest(\".search-item\"); if (item) reset(); }); Setelah itu, gue tinggal ngurus UInya aja supaya search box dan hasil searchnya rapi sekaligus ngga tabrakan dengan menu navbar.\nToC ScrollSpy Gue balik lagi ngotak-ngatik bagian floating ToC yang sebelumnya udah gue bahas di revamp part I. Kali ini floating tocnya punya kemampuan mirip ScrollSpy dari Bootstrap. Singkatnya, ini fitur yang bisa nge-highlight otomatis bagian item ToC mana yang sedang kita lihat atau baca berdasarkan posisi scroll.\nImplementasi Untuk ini, bagian code ToC bawaan dari PaperMod yang sebelumnya cuma buat expand heading ToC aja, gue rombak penuh pakai bantuan ChatGPT. Karena codenya lumayan panjang, jadi gue simpen di gist aja deh.\nSwup for Dynamic Page Load Sebelumnya sempat mikir untuk pindah ke Gatsby atau NextJS yang punya SSR (Server-side rendering), simply cuma pengen transisi perhalamannya lebih seamless dan modern aja sih. Tapi gue urungkan, soalnya Hugo lebih friendly dan gampang dimanage.\nSekarang keinginan untuk punya transisi halaman secara seamless di Hugo ini bisa terwujud berkat Swup. Singkatnya, meskipun gue pakai SSG seperti Hugo, Swup ini bisa ngasih pengalaman mirip SSR.\nImplementasi Untuk implementasinya sendiri cukup mudah kok. Gue cuma perlu nentuin kontainer mana yang mau dijadiin sebagai area konten dinamiknya. Kontainer area konten gue disini adalah element , lalu tinggal tag aja element ini dengan id #swup (/layouts/_default/baseof.html):\nbaseof.html ... \u003cmain id=\"swup\" class=\"main transition-fades\" \u003cdiv class=\"content-wrapper\"\u003e {{- block \"main\" . }}{{ end }} \u003c/div\u003e \u003c/main\u003e ... Masalahnya disini adalah Swup hanya mengupdate/mengganti elemen yang ada di dalam kontainer Swup (partial load). Script event listener, di luar kontainer Swup, ngga ‘aware’ dengan partial load ini.\nSaat partial load terjadi, elemen lama yang punya event listener akan diganti dengan elemen baru. Karena target elemennya hilang (elemen lama), aksi dari event listener juga ngga akan jalan.\nSolusi masalah ini adalah me-reinisialasi semua event listener script dari element yang ada di dalam kontainer Swup setiap kali partial load terjadi.\ncustom.js const swup = new Swup(); function initCustomFunction() { initTOC(\".toc\"); profileClick(\".profile-img\"); restoreMenuScroll(); updateActiveMenu(); hljs.highlightAll(); } // first init custom listeners document.addEventListener(\"DOMContentLoaded\", () =\u003e { initCustomFunction(); }); // reinit on page ready swup.hooks.on(\"page:view\", () =\u003e { initCustomFunction(); }); End Baiklah, kurang lebih itu update revamp kali ini dan gue udah ngerasa cukup puaslah, terutama dibagian Swup. Soal revamp ini juga itung-itung refreshing skill web sih, jadi bakal gue lanjut di part berikutnya untuk bagian mobile (mungkin).\nSee you in the next post!\n","wordCount":"855","inLanguage":"en","datePublished":"2025-11-30T22:37:50+07:00","dateModified":"2025-11-30T22:37:50+07:00","author":{"@type":"Person","name":"Fahmi FJ"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://fahmifj.github.io/blog/revamping-my-blog-part-2/"},"publisher":{"@type":"Organization","name":"Ef's log","logo":{"@type":"ImageObject","url":"https://fahmifj.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class="header sticky"><nav id=navbar class=nav><div class=logo><a href=https://fahmifj.github.io/ accesskey=h title="Fahmi FJ">F's log</a>
<button id=theme-toggle accesskey=t title><svg id="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div><ul id=menu onscroll=menuOnScroll()><li><a href=https://fahmifj.github.io/blog/ title=Blog>Blog</a></li><li><a href=https://fahmifj.github.io/ctf/ title=CTF>CTF</a></li><li><a href=https://fahmifj.github.io/threads/ title=Threads>Threads</a></li><li><a href=https://fahmifj.github.io/archives/ title=Archives>Archives</a></li></ul><button id=menu-toggle aria-label="Toggle menu">☰</button><div class=search-container><div id=searchBox><input class=searchInput id=searchInput aria-label=search type=search placeholder=Search...><div class=searchResults-container><span class="search-results hidden" id=searchResults aria-label="search results"></span></div></div></div></nav></header><div id=mask></div><main id=swup class="main transition-fade"><div class=content-wrapper><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://fahmifj.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://fahmifj.github.io/blog/>Blog</a></div><h1 class=post-title>Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo</h1><p class=post-description>Part kedua revamp PaperMod</p><div class=post-meta><span class=author>Fahmi FJ</span>&nbsp;&#183;&nbsp;<span class=date>Published on November 30, 2025</span>&nbsp;&#183;&nbsp;<span class=read-time>5 min read</span></div><hr></header><div class=post-content-container><nav id=toc class=toc aria-label="Table of contents"><div class=inner><ul><li><a href=#search-in-navbar aria-label="Search in Navbar">Search in Navbar</a><ul><li><a href=#implementasi aria-label=Implementasi>Implementasi</a></li><li><a href=#touch-up-add-blur-effect aria-label="Touch up: Add blur effect">Touch up: Add blur effect</a></li></ul></li><li><a href=#toc-scrollspy aria-label="ToC ScrollSpy">ToC ScrollSpy</a><ul><li><a href=#implementasi-1 aria-label=Implementasi>Implementasi</a></li></ul></li><li><a href=#swup-for-dynamic-page-load aria-label="Swup for Dynamic Page Load">Swup for Dynamic Page Load</a><ul><li><a href=#implementasi-2 aria-label=Implementasi>Implementasi</a></li></ul></li><li><a href=#end aria-label=End>End</a></li></ul></div></nav><div class=post-content><div class=series-info><p><i>This article is a part of:</i></p><ul><div><strong>Series:</strong></div></div></ul></div><p>Menjelang akhir tahun, gue mulai lanjutin lagi proses revamp blog ini. Dari catatan pribadi, revamp ini udah masuk yang ke-9, tapi disini gue rangkum aja bagian majornya biar lebih gampang. Jadi gue anggap ini revamp kedua.</p><p>Di revamp yang <a href=https://fahmifj.github.io/notes/revamping-my-blog/ target=_blank rel="noopener noreferrer">pertama</a>, gue banyak otak-atik di bagian UI, nah di revamp kedua ini, gue lebih condong ke UXnya, khususnya untuk bagian navigasi.</p><h2 id=search-in-navbar>Search in Navbar<a class=anchor aria-hidden=true href=#search-in-navbar>#</a></h2><p>Di PaperMod (tema bawaan), fitur pencariannya ini berupa sebuah halaman khusus. Jadi ketika user mau cari sesuatu di blog gue, dia harus mengklik menu &ldquo;Search&rdquo; yang mengarah ke halaman khusus berisi search box. Di situlah tempat user melakukan pencariannya.</p><p>Menurut gue hal cara tersebut kurang praktis dan efisien. Jadi, untuk mempermudah navigasi pencarian, gue pindahkan search box tersebut ke bagian Navbar.</p><p><div class=img-container><img src=./imgs/image-20251118233004676.png alt=image-20251118233004676></div></p><h3 id=implementasi>Implementasi<a class=anchor aria-hidden=true href=#implementasi>#</a></h3><p>Caranya gampang, code html terkait search box tinggal di copy-paste ke dalam <code>layout/partials/header.html</code>:</p><figure class=highlight><figcaption><span class=hl-filename>header.html</span></figcaption><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>...[SNIP]...
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;searchBox&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>input</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;searchInput&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;searchInput&#34;</span> <span class=na>aria-label</span><span class=o>=</span><span class=s>&#34;search&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;search&#34;</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;Search...&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;searchResults-container &#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  	<span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;search-results hidden&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;searchResults&#34;</span> <span class=na>aria-label</span><span class=o>=</span><span class=s>&#34;search results&#34;</span> <span class=p>&gt;&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>...[SNIP]...</span></span></code></pre></figure><p>Fitur search PaperMod ini mengandalkan <a href=fusejs.io target=_blank rel="noopener noreferrer">Fuse</a> dimana index searchnya hanya di-<em>fetch</em> dan dimuat ketika kita berada di halaman search tadi. Artinya, kalau search box gue pindah ke navbar, search-nya nggak akan jalan kecuali indexnya dimuat di setiap halaman.</p><p>Untuk hal ini cukup simple, gue cuma perlu hapus kondisional if berikut yang ada di dalam <code>layout/partials/head.html</code>:</p><figure class=highlight><figcaption><span class=hl-filename>head.html</span></figcaption><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=cm>/* Search */</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=cm>/* Load search in every page */</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=cm>/*if (eq .Layout `search`) */</span> <span class=o>-</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>link</span> <span class=nx>crossorigin</span><span class=p>=</span><span class=s>&#34;anonymous&#34;</span> <span class=nx>rel</span><span class=p>=</span><span class=s>&#34;preload&#34;</span> <span class=nx>as</span><span class=p>=</span><span class=s>&#34;fetch&#34;</span> <span class=nx>href</span><span class=p>=</span><span class=s>&#34;{{- .Site.BaseURL -}}index.json&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>script</span> <span class=k>defer</span> <span class=nx>crossorigin</span><span class=p>=</span><span class=s>&#34;anonymous&#34;</span> <span class=nx>src</span><span class=p>=</span><span class=s>&#34;{{ $search.RelPermalink }}&#34;</span><span class=p>&gt;&lt;</span><span class=o>/</span><span class=nx>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=cm>/* end */</span> <span class=o>-</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=o>...</span></span></span></code></pre></figure><h3 id=touch-up-add-blur-effect>Touch up: Add blur effect<a class=anchor aria-hidden=true href=#touch-up-add-blur-effect>#</a></h3><p>Terinspirasi dari tema <a href=https://hugoloveit.com/ target=_blank rel="noopener noreferrer">LoveIt</a>, gue tambahin juga efek blur ketika user sedang fokus ke pencarian.</p><p>Implementasinya ini gampang. Pada file <code>/layouts/_default/baseof.html</code>, tepat setelah tag <code>&lt;body></code>, gue tambah sebuah elemen div dengan ID <code>mask</code> yang berfungsi sebagai masking.</p><figure class=highlight><figcaption><span class=hl-filename>baseof.html</span></figcaption><pre tabindex=0><code class=language-html  data-lang=html >&lt;body&gt;
&lt;div id=&#34;mask&#34;&gt;&lt;/div&gt;
  &lt;main&gt;...&lt;/main&gt;
&lt;/body&gt;</code></pre></figure><p>Lalu untuk CSSnya gue tambahkan properti berikut.</p><figure class=highlight><figcaption><span class=hl-filename>custom.css</span></figcaption><pre tabindex=0><code class=language-css  data-lang=css >...
#mask {
    background-repeat: no-repeat;
    background-position: center;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background-color: rgba(0, 0, 0, 0);
}
body.blur &gt; :not(.header) {
    -webkit-filter: blur(4px);
    -moz-filter: blur(4px);
    -ms-filter: blur(4px);
    -o-filter: blur(4px);
    filter: blur(4px);
}
...</code></pre></figure><p>Untuk behavior atau logicnya sih simple:</p><ul><li>Tambahkan efek blur ke element <code>&lt;body></code> dan buat elemen masking menjadi paling atas dari semua elemen yang ada ketika user melakukan klik pada search box.</li><li>Hapus efek blur ketika user melakukan klik pada item pencarian atau pada masking elemen</li></ul><p>Kalo di Javascriptnya seperti berikut.</p><figure class=highlight><figcaption><span class=hl-filename>fastsearch.js</span></figcaption><pre tabindex=0><code class=language-javascript  data-lang=javascript >...
const mask = document.getElementById(&#34;mask&#34;)
const pageBody = document.body;

function bgBlur() {
  pageBody.classList.add(&#34;blur&#34;);
  mask.style.zIndex = &#34;99&#34;; // z-index shouldn&#39;t be higher than the navbar/header
  mask.style.backgroundColor = &#34;rgba(0,0,0,0.25)&#34;;
}

function bgUnblur() {
  pageBody.classList.remove(&#34;blur&#34;);
  mask.style.zIndex = &#34;-1&#34;;
  mask.style.backgroundColor = &#34;rgba(0,0,0,0)&#34;;
}

function reset() {
 	...[SNIP]...
  bgUnblur();
}

searchInput.addEventListener(&#34;click&#34;, bgBlur);
mask.addEventListener(&#34;click&#34;, reset);
document.addEventListener(&#34;click&#34;, (e) =&gt; {
  const item = e.target.closest(&#34;.search-item&#34;);
  if (item) reset();
});</code></pre></figure><p>Setelah itu, gue tinggal ngurus UInya aja supaya search box dan hasil searchnya rapi sekaligus ngga tabrakan dengan menu navbar.</p><h2 id=toc-scrollspy>ToC ScrollSpy<a class=anchor aria-hidden=true href=#toc-scrollspy>#</a></h2><p>Gue balik lagi ngotak-ngatik bagian floating ToC yang sebelumnya udah gue bahas di revamp part I. Kali ini floating tocnya punya kemampuan mirip ScrollSpy dari Bootstrap. Singkatnya, ini fitur yang bisa nge-highlight otomatis bagian item ToC mana yang sedang kita lihat atau baca berdasarkan posisi scroll.</p><h3 id=implementasi-1>Implementasi<a class=anchor aria-hidden=true href=#implementasi-1>#</a></h3><p>Untuk ini, bagian code ToC bawaan dari PaperMod yang sebelumnya cuma buat expand heading ToC aja, gue rombak penuh pakai bantuan ChatGPT. Karena codenya lumayan panjang, jadi gue simpen di <a href=https://gist.githubusercontent.com/fahmifj/1a2a00983476a15b350158e89fc1d462/raw/64b2a0506dbe7789b4f711e3238d21b5acf32220/toc.js target=_blank rel="noopener noreferrer">gist</a> aja deh.</p><h2 id=swup-for-dynamic-page-load>Swup for Dynamic Page Load<a class=anchor aria-hidden=true href=#swup-for-dynamic-page-load>#</a></h2><p>Sebelumnya sempat mikir untuk pindah ke Gatsby atau NextJS yang punya SSR (Server-side rendering), simply cuma pengen transisi perhalamannya lebih seamless dan modern aja sih. Tapi gue urungkan, soalnya Hugo lebih friendly dan gampang dimanage.</p><p>Sekarang keinginan untuk punya transisi halaman secara seamless di Hugo ini bisa terwujud berkat <a href=https://swup.js.org/ target=_blank rel="noopener noreferrer">Swup</a>. Singkatnya, meskipun gue pakai SSG seperti Hugo, Swup ini bisa ngasih pengalaman mirip SSR.</p><h3 id=implementasi-2>Implementasi<a class=anchor aria-hidden=true href=#implementasi-2>#</a></h3><p>Untuk implementasinya sendiri cukup mudah kok. Gue cuma perlu nentuin kontainer mana yang mau dijadiin sebagai area konten dinamiknya. Kontainer area konten gue disini adalah element <code>&lt;main></code>, lalu tinggal tag aja element ini dengan id <code>#swup</code> (<code>/layouts/_default/baseof.html)</code>:</p><figure class=highlight><figcaption><span class=hl-filename>baseof.html</span></figcaption><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>...
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>main</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;swup&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;main transition-fades&#34;</span>
</span></span><span class=line><span class=cl>  <span class=err>&lt;</span><span class=na>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;content-wrapper&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  	{{- block &#34;main&#34; . }}{{ end }}
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>main</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>...</span></span></code></pre></figure><p>Masalahnya disini adalah Swup hanya mengupdate/mengganti elemen yang ada di dalam kontainer Swup (partial load). Script event listener, di luar kontainer Swup, ngga &lsquo;aware&rsquo; dengan partial load ini.</p><p>Saat partial load terjadi, elemen lama yang punya event listener akan diganti dengan elemen baru. Karena target elemennya hilang (elemen lama), aksi dari event listener juga ngga akan jalan.</p><p>Solusi masalah ini adalah me-reinisialasi semua event listener script dari element yang ada di dalam kontainer Swup setiap kali partial load terjadi.</p><figure class=highlight><figcaption><span class=hl-filename>custom.js</span></figcaption><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>swup</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Swup</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>initCustomFunction</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>initTOC</span><span class=p>(</span><span class=s2>&#34;.toc&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>profileClick</span><span class=p>(</span><span class=s2>&#34;.profile-img&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>restoreMenuScroll</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>updateActiveMenu</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>hljs</span><span class=p>.</span><span class=nx>highlightAll</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// first init custom listeners
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;DOMContentLoaded&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>initCustomFunction</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// reinit on page ready
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>swup</span><span class=p>.</span><span class=nx>hooks</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s2>&#34;page:view&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>initCustomFunction</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></figure><h2 id=end>End<a class=anchor aria-hidden=true href=#end>#</a></h2><p>Baiklah, kurang lebih itu update revamp kali ini dan gue udah ngerasa cukup puaslah, terutama dibagian Swup. Soal revamp ini juga itung-itung refreshing skill web sih, jadi bakal gue lanjut di part berikutnya untuk bagian mobile (mungkin).</p><p>See you in the next post!</p></div></div><div class=post-meta-bottom></div><footer class=post-footer><ul class=post-tags><li><a href=https://fahmifj.github.io/tags/coretan/>coretan</a></li><li><a href=https://fahmifj.github.io/tags/swup/>swup</a></li><li><a href=https://fahmifj.github.io/tags/spa/>spa</a></li><li><a href=https://fahmifj.github.io/tags/hugo/>hugo</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo on twitter" href="https://twitter.com/intent/tweet/?text=Revamping%20My%20Blog%20Part%20II%3a%20Search%20Nav%2c%20ScrollSpy%2c%20SPA%20in%20Hugo&amp;url=https%3a%2f%2ffahmifj.github.io%2fblog%2frevamping-my-blog-part-2%2f&amp;hashtags=coretan%2cswup%2cspa%2chugo"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2ffahmifj.github.io%2fblog%2frevamping-my-blog-part-2%2f&amp;title=Revamping%20My%20Blog%20Part%20II%3a%20Search%20Nav%2c%20ScrollSpy%2c%20SPA%20in%20Hugo&amp;summary=Revamping%20My%20Blog%20Part%20II%3a%20Search%20Nav%2c%20ScrollSpy%2c%20SPA%20in%20Hugo&amp;source=https%3a%2f%2ffahmifj.github.io%2fblog%2frevamping-my-blog-part-2%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo on reddit" href="https://reddit.com/submit?url=https%3a%2f%2ffahmifj.github.io%2fblog%2frevamping-my-blog-part-2%2f&title=Revamping%20My%20Blog%20Part%20II%3a%20Search%20Nav%2c%20ScrollSpy%2c%20SPA%20in%20Hugo"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2ffahmifj.github.io%2fblog%2frevamping-my-blog-part-2%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo on whatsapp" href="https://api.whatsapp.com/send?text=Revamping%20My%20Blog%20Part%20II%3a%20Search%20Nav%2c%20ScrollSpy%2c%20SPA%20in%20Hugo%20-%20https%3a%2f%2ffahmifj.github.io%2fblog%2frevamping-my-blog-part-2%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Revamping My Blog Part II: Search Nav, ScrollSpy, SPA in Hugo on telegram" href="https://telegram.me/share/url?text=Revamping%20My%20Blog%20Part%20II%3a%20Search%20Nav%2c%20ScrollSpy%2c%20SPA%20in%20Hugo&amp;url=https%3a%2f%2ffahmifj.github.io%2fblog%2frevamping-my-blog-part-2%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></div></main><footer class=footer><div class=footer-wrapper><div class=footer-right><span class=copyright>&copy; 2025&nbsp;<a href=https://fahmifj.github.io/about>Fahmi FJ</a></span></div><div class=footer-mid><span class=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a></span>
&nbsp;·&nbsp;
<span class=support><a href=https://fahmifj.github.io/about#support>support</a></span>
&nbsp;·&nbsp;
<span class=rss><a href=https://fahmifj.github.io/index.xml>rss</a></span></div><div class=footer-left><span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span><a href=https://git.io/hugopapermod rel="noopener noreferrer" target=_blank>PaperMod</a></span></div></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script src=https://fahmifj.github.io/js/toc.min.2fdf2a552d475a4f70f7cd5bdd987dfa7d62f78b07acacd44027b6b9486268e4.js></script>
<script defer type=module src=https://fahmifj.github.io/js/Swup.umd.min.d64a38b8723041127f14ef7bcd3898876f7226120fe6bd79aadb73f863ee0395.js></script>
<script defer src=https://fahmifj.github.io/js/custom.min.92ee8d1cb48fc287df05886217b413a12841616e99833d423ea6338e6ad1b66f.js></script></body></html>